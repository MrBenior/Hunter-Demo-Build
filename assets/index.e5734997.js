import{j as s,r as u}from"./react.bb2ac364.js";import{c as q}from"./react-dom.13109369.js";import{B as K}from"./react-router-dom.f97568cf.js";import{u as Q,a as F,P as Z}from"./react-redux.be914e30.js";import{c as j}from"./classnames.708d9799.js";import{c as U,a as g,b as ee}from"./@reduxjs.1d16fd27.js";import{a as L}from"./axios.3ceaec4c.js";import"./base64-js.621b1409.js";import"./scheduler.765c72db.js";import"./react-router.120260e4.js";import"./@remix-run.695996fb.js";import"./use-sync-external-store.04ad0e3e.js";import"./node-stdlib-browser.d9cad76e.js";import"./buffer.54dd979c.js";import"./ieee754.44f7831e.js";import"./process.c2387908.js";import"./redux.ea15d17b.js";import"./immer.f14cded8.js";import"./redux-thunk.f771c803.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}})();var E;const m=(E=window.Telegram)==null?void 0:E.WebApp;var R;(t=>{t.IsTelegram=()=>typeof window.Telegram<"u"&&(0,t.GetEncodedInitData)()!=null,t.GetUnsafeInitData=()=>{const a=m==null?void 0:m.initDataUnsafe;return a||(console.warn("[Telegram Web API] Unsafe init data not found, hm"),null)};function e(){var o,n,l,S,p,f,x;const a=(0,t.GetUnsafeInitData)();return{id:(o=a==null?void 0:a.user)==null?void 0:o.id,firstName:(n=a==null?void 0:a.user)==null?void 0:n.first_name,lastName:(l=a==null?void 0:a.user)==null?void 0:l.last_name,username:(S=a==null?void 0:a.user)==null?void 0:S.username,photoUrl:(p=a==null?void 0:a.user)==null?void 0:p.photo_url,countryCode:(f=a==null?void 0:a.user)==null?void 0:f.language_code,isPremium:(x=a==null?void 0:a.user)==null?void 0:x.is_premium,isCheater:!1}}t.GetNewProfilyByUnsafeInitData=e,t.GetEncodedInitData=()=>{const a=m==null?void 0:m.initData;return a||(console.warn("[Telegram Web API] Encoded init data not found"),null)}})(R||(R={}));const C=R,te=()=>F(),O=Q,h="http://localhost:3838";var M;(t=>{t.roadmapPath=`${h}/api/tg-hunter/v1/general/content/roadmap`,t.timetickPath=`${h}/api/tg-hunter/v1/general/timetick`,t.createSessionPath=`${h}/api/tg-hunter/v1/auth/user/session/create`,t.refreshSessionPath=`${h}/api/tg-hunter/v1/auth/user/session/refresh`,t.createAccountPath=`${h}/api/tg-hunter/v1/account/user/create`,t.getAccountPath=`${h}/api/tg-hunter/v1/account/user`})(M||(M={}));const D=M,I="accessToken",b="refreshToken",ae={status:"loading",accountStatus:"loading",accessToken:localStorage.getItem(I)||null,refreshToken:localStorage.getItem(b)||null},v=U("user/createSession",async({encodedInitData:t})=>{try{const a=(await L.post(D.createSessionPath,{encodedInitData:t})).data;return console.log(`Claimed session data: ${JSON.stringify(a)}`),a||null}catch{throw console.error("First aunthentication failed, something wrong..."),new Error("First authentication step failed")}}),N=U("user/createAccount",async({accessToken:t,newProfile:e})=>{try{const a={id:e==null?void 0:e.id,parentId:e==null?void 0:e.parentId,firstName:e==null?void 0:e.firstName,lastName:e==null?void 0:e.lastName,username:e==null?void 0:e.username,ipAddress:null,isPremium:e==null?void 0:e.isPremium,countryCode:e==null?void 0:e.countryCode,photoUrl:e==null?void 0:e.photoUrl};return(await L.post(`${D.createAccountPath}`,{userProfile:a},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data||null}catch{throw console.error(`Failed to create account by data: ${JSON.stringify(e)}`),new Error("Failed to create new profile, something wrong...")}}),G=g({name:"authSession",initialState:ae,reducers:{setAccessToken:(t,e)=>{t.accessToken=e.payload,console.log(`Claimed access token from server: ${t.accessToken}`),localStorage.setItem(I,e.payload)},setRefreshToken:(t,e)=>{t.refreshToken=e.payload,localStorage.setItem(b,e.payload)},clearSession:t=>{t.accessToken=null,t.refreshToken=null,localStorage.removeItem(I),localStorage.removeItem(b)}},extraReducers:t=>{t.addCase(v.pending,e=>{e.status="loading"}).addCase(v.fulfilled,(e,a)=>{e.status="succeeded",e.accessToken=a.payload.accessToken,localStorage.setItem(I,a.payload.accessToken)}).addCase(v.rejected,(e,a)=>{e.status="failed",e.error=a.error.message||"Unknown error"}).addCase(N.pending,e=>{e.accountStatus="loading"}).addCase(N.fulfilled,(e,a)=>{const{userProfile:c,refreshToken:o}=a.payload;console.log(`Parsed new user profile: ${JSON.stringify(c)}`),e.refreshToken=o,e.userProfile=c,localStorage.setItem(b,o),e.accountStatus="succeeded"}).addCase(N.rejected,(e,a)=>{e.accountStatus="failed",e.error=a.error.message})}});G.actions;const se=G.reducer,oe=()=>{const t=te();return{authenticateUser:c=>{t(v({encodedInitData:c}))},createUserAccount:(c,o)=>{t(N({accessToken:c,newProfile:o}))}}},ne="development",re={id:"development",status:"loading",steps:[{id:1,title:"Loading...",status:"completed"},{id:2,title:"Loading...",status:"completed"},{id:3,title:"Loading...",status:"in-progress"},{id:4,title:"Loading...",status:"in-progress"},{id:5,title:"Loading...",status:"in-progress"},{id:6,title:"Loading...",status:"in-progress"}]},B=U("roadmap/fetchRoadmap",async()=>(await L.get(`${D.roadmapPath}/${ne}`)).data.roadmap),ce=g({name:"roadmap",initialState:re,reducers:{},extraReducers:t=>{t.addCase(B.pending,e=>{e.status="loading"}).addCase(B.fulfilled,(e,a)=>{e.status="succeeded",e.id=a.payload.id,e.steps=a.payload.steps}).addCase(B.rejected,e=>{e.status="failed"})}}),ie=ce.reducer,le="/Hunter-Demo-Build/icons/CompleteTask.webp",de="checkbox__Dr8IM",ue="finished__N9bxW",pe="checkboxSprite__DlJcB",A={checkbox:de,finished:ue,checkboxSprite:pe},me=({checked:t})=>s.jsx("div",{className:j(A.checkbox,{[A.finished]:t}),children:s.jsx("img",{className:A.checkboxSprite,src:le,alt:"Checkbox"})}),he="/Hunter-Demo-Build/icons/Map.png",ge="roadmapMap__QIshS",fe="roadmapMapIcon__--5ye",W={roadmapMap:ge,roadmapMapIcon:fe},xe=()=>s.jsx("div",{className:W.roadmapMap,children:s.jsx("img",{className:W.roadmapMapIcon,src:he,alt:"Roadmap"})}),_e="/Hunter-Demo-Build/icons/Friends.webp",Se="referralIcon__5zs-M",ke="referralIconSprite__hxWb6",w={referralIcon:Se,referralIconSprite:ke},ye=()=>s.jsx("div",{className:w.referralIcon,children:s.jsx("img",{className:w.referralIconSprite,src:_e,alt:"Referral Icon"})}),Te="/Hunter-Demo-Build/icons/TelegramIcon.png",Ce="telegramIcon__SbSgx",Ie="telegramIconSprite__sDnP3",H={telegramIcon:Ce,telegramIconSprite:Ie},be=()=>s.jsx("div",{className:H.telegramIcon,children:s.jsx("img",{className:H.telegramIconSprite,src:Te,alt:"Telegram Icon"})}),ve="buttonsContainer__B-rr6",Ne="channelButton__XGuLV",Be="referralButton__t08PW",je="referralButtonText__ClE1Q",Ae="channelButtonText__8yU2w",Re="activeButton__IbRV6",d={buttonsContainer:ve,channelButton:Ne,referralButton:Be,referralButtonText:je,channelButtonText:Ae,activeButton:Re},Me=()=>{const[t,e]=u.useState(null),a=c=>{e(c)};return s.jsxs("div",{className:d.buttonsContainer,children:[s.jsxs("button",{className:j(d.channelButton,{[d.activeButton]:t==="channel"}),onClick:()=>a("channel"),children:[s.jsx(be,{}),s.jsx("span",{className:d.channelButtonText,children:"News"})]}),s.jsxs("button",{className:j(d.referralButton,{[d.activeButton]:t==="referral"}),onClick:()=>a("referral"),children:[s.jsx(ye,{}),s.jsx("span",{className:d.referralButtonText,children:"Frens"})]})]})},$e="/Hunter-Demo-Build/icons/LeftRock.svg",Ue="/Hunter-Demo-Build/icons/RightRock.svg",Le="roadmapPage__PQ2VW",De="roadmapContainer__6jTU5",Oe="roadmapMapContent__swb4Z",We="lootMapContainer__1KEzj",we="rocksContainer__Xsd2S",He="rockLeft__j4zYb",Ee="rockRight__XXGng",Fe="headerMap__Almsf",Ge="titleMap__AJTRM",ze="bottomContainer__GYdj6",Je="roadmapList__oJjUC",Pe="roadmapStep__zckjz",Ve="finished__IwpZI",Xe="stepTextContainer__f3wX-",Ye="stepTitle__EW8h9",qe="stepStatus__3y3XN",Ke="loadingText__PtHuw",Qe="channelButtonText__rl7O-",r={roadmapPage:Le,roadmapContainer:De,roadmapMapContent:Oe,lootMapContainer:We,rocksContainer:we,rockLeft:He,rockRight:Ee,headerMap:Fe,titleMap:Ge,bottomContainer:ze,roadmapList:Je,roadmapStep:Pe,finished:Ve,stepTextContainer:Xe,stepTitle:Ye,stepStatus:qe,loadingText:Ke,channelButtonText:Qe},Ze=()=>{const t=F(),{accessToken:e,refreshToken:a,userProfile:c,status:o,accountStatus:n,error:l}=O(i=>i.authUser),{steps:S,status:p}=O(i=>i.roadmap),{authenticateUser:f,createUserAccount:x}=oe();u.useState(null);const[k,X]=u.useState(null),[_,Y]=u.useState(null),y=C.IsTelegram()?C.GetEncodedInitData():"query_id=AAHacOUrAAAAANpw5Sufd5Vt&user=%7B%22id%22%3A736456922%2C%22first_name%22%3A%22Mr%22%2C%22last_name%22%3A%22Veit%22%2C%22username%22%3A%22MrVeit%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2FkHEHvcqBDQz8-7hxmczRHHio9dWTTmaBg37PVJmU7eg.svg%22%7D&auth_date=1743755983&signature=2ozK_SYSko56hnaD49fuucKorqbBE2IWXN3UY_rUjRo1CYYnG4OXI15bVzYBRmuc0nnk1IW_n4gFcNO1R8kGAA&hash=9bfc007502d72226d27d81bef66a4683ecdcffff672c2ac1e919d59437e969b8",T=C.IsTelegram()?C.GetNewProfilyByUnsafeInitData():{id:736456922,firstName:"Debul",username:"GodBot",status:"ONLINE",photoUrl:"https://t.me/i/userpic/320/kHEHvcqBDQz8-7hxmczRHHio9dWTTmaBg37PVJmU7eg.svg",countryCode:"en",isPremium:!0,isCheater:!0};return u.useEffect(()=>{y&&!k&&(X(y),console.log(`Parsed encoded init data: ${y}`)),T&&!_&&(Y(T),console.log(`Parsed user profile entity for create: ${JSON.stringify(T)}`))},[y,T]),u.useEffect(()=>{p==="loading"&&t(B())},[t,p]),u.useEffect(()=>{k&&!e&&!a&&o==="loading"&&(console.warn("User session is loading..."),f(k)),_&&e&&!a&&n==="loading"&&(console.log(`Session successfully created, token: ${e}`),c||(console.warn(`New profile for creation: ${JSON.stringify(_)}`),x(e,_)))},[k,_,e,a,o,n,c,l,f,x]),s.jsxs("div",{className:r.roadmapPage,children:[s.jsxs("div",{className:r.roadmapContainer,children:[s.jsxs("div",{className:r.roadmapMapContent,children:[s.jsxs("div",{className:r.rocksContainer,children:[s.jsx("img",{className:r.rockLeft,src:$e,alt:"Left Rock"}),s.jsx("img",{className:r.rockRight,src:Ue,alt:"Right Rock"})]}),s.jsxs("div",{className:r.lootMapContainer,children:[s.jsx(xe,{}),s.jsx("span",{className:r.headerMap,children:"ROADMAP"}),s.jsx("span",{className:r.titleMap,children:"Watch the development"})]})]}),s.jsx("div",{className:r.bottomContainer,children:s.jsx("div",{className:r.roadmapList,children:p==="loading"?s.jsx("div",{className:r.loadingText,children:"Loading..."}):S.map(i=>s.jsxs("div",{className:j(r.roadmapStep,{[r.finished]:i.status==="completed"}),children:[s.jsx(me,{checked:i.status==="completed"}),s.jsxs("div",{className:r.stepTextContainer,children:[s.jsx("div",{className:r.stepTitle,children:i.title}),s.jsx("div",{className:r.stepStatus,children:i.status==="completed"?"Completed":"In progress"})]})]},i.id))})})]}),s.jsx(Me,{})]})},et="app__JnT6l",tt="bgImage__Tgt-X",at={app:et,bgImage:tt},st=()=>s.jsx("div",{className:at.app,children:s.jsx(Ze,{})}),ot={huntStartModal:!1,perks:!1},z=g({name:"modals",initialState:ot,reducers:{huntStartModal:(t,e)=>{t.huntStartModal=e.payload},perksModal:(t,e)=>{t.perks=e.payload}}});z.actions;const nt=z.reducer,rt={lvl:0,availablePoints:10,hunting:{endTime:0},experience:.01,perks:[{name:"accuracy",lvl:0},{name:"luck",lvl:0},{name:"speed",lvl:0},{name:"stamina",lvl:0}],balance:{ducks:123,arrows:1e3,ton:3.22}},J=g({name:"user",initialState:rt,reducers:{setTimer:(t,e)=>{t.hunting.endTime=e.payload},upgradePerk:(t,e)=>{t.availablePoints!==0&&(t.availablePoints=t.availablePoints-1,t.perks[e.payload].lvl++)},updateBalance:(t,e)=>{const a=e.payload.target;t.balance[a]=t.balance[a]+e.payload.value}}});J.actions;const ct=J.reducer,it="Back",lt="Получить",dt={title:"Охота окончена",text:"Добыча",btn:"Получить"},ut={titles:["short","middle","long"],text1:"Duration",text2:"Ожидаемая добыча",hours:["hours","hours","hours"],ducks:"ducks"},pt={startHuntButton:"Start hunting"},mt={perksBtn:"Exp points",lvlText:"Your exp points",experience:{title:"Hunt experience",description:"gives experience for hunting"},list:[{title:"Accuracy",description:"снижает число промахов, повышает добычу уток."},{title:"Luck",description:"снижает число промахов, повышает добычу уток."},{title:"Speed",description:"снижает число промахов, повышает добычу уток."},{title:"Stamina",description:"снижает число промахов, повышает добычу уток."}]},ht={title:"Лавка торговца",text:"Тут вы можете купить товары за TON",sectionTitle:{arrows:"Стрелы",exp:"Очки навыков",nfts:"NFTs"}},gt={types:"subscribe",daily:!0,title:"Daily tasks",description:"Gives experience for hunting"},ft={daily:!0,oneTime:!0},xt={map:"Daily checkup card"},_t={back:it,getReward:lt,huntOverModal:dt,huntStartModal:ut,homepage:pt,perks:mt,market:ht,tasks:gt,types:ft,daily:xt},St=_t,P=g({name:"language",initialState:St,reducers:{changeLanguage:(t,e)=>e.payload}});P.actions;const kt=P.reducer,yt={huntingResult:null},V=g({name:"notification",initialState:yt,reducers:{setHuntingResult:(t,e)=>{t.huntingResult=e.payload}}});V.actions;const Tt=V.reducer,Ct=ee({reducer:{modals:nt,user:ct,lang:kt,notification:Tt,roadmap:ie,authUser:se}});const $=window.Telegram.WebApp;["tdesktop","macos"].includes($.platform);const It=window.Telegram.WebApp.platform==="unknown";!["tdesktop","macos"].includes($.platform)&&!It&&(window.Telegram.WebApp.expand(),window.Telegram.WebApp.requestFullscreen(),window.Telegram.WebApp.enableClosingConfirmation(),$.disableVerticalSwipes());q.createRoot(document.getElementById("root")).render(s.jsx(Z,{store:Ct,children:s.jsx(K,{children:s.jsx(st,{})})}));
