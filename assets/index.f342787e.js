import{r as d,j as t,a as dt}from"./react.720b3139.js";import{c as ut}from"./react-dom.7cdaea01.js";import{L as pt,B as ht}from"./react-router-dom.74abfda4.js";import{u as mt,a as ft,P as gt}from"./react-redux.3dc94b02.js";import{y as V,L as vt}from"./react-toastify.85fa8e98.js";import{c as L,a as E,u as xt,b as Ct}from"./@reduxjs.5e524a90.js";import{a as $}from"./axios.3ceaec4c.js";import{c as Ne}from"./classnames.708d9799.js";import{A as be,m as ge}from"./motion.9a43fd49.js";import{d as De,e as _t,b as Me}from"./react-router.2fb66c7d.js";import"./base64-js.621b1409.js";import"./scheduler.765c72db.js";import"./@remix-run.055cfd82.js";import"./use-sync-external-store.21b2ce68.js";import"./clsx.0839fdbe.js";import"./node-stdlib-browser.d9cad76e.js";import"./buffer.54dd979c.js";import"./ieee754.44f7831e.js";import"./process.c2387908.js";import"./redux.ea15d17b.js";import"./immer.f14cded8.js";import"./redux-thunk.f771c803.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const Ee=d.createContext(void 0),U=()=>mt(),k=ft,N="http://localhost:3838";var ye;(s=>{s.huntsConfigsPath=`${N}/api/tg-hunter/v1/user/gameplay/hunts`,s.dailyStreakConfigsPath=`${N}/api/tg-hunter/v1/statistics/daily-streak`,s.timetickPath=`${N}/api/tg-hunter/v1/general/timetick`,s.createSessionPath=`${N}/api/tg-hunter/v1/auth/user/session/create`,s.refreshSessionPath=`${N}/api/tg-hunter/v1/auth/user/session/refresh`,s.createAccountPath=`${N}/api/tg-hunter/v1/account/user/create`,s.playerAccountPath=`${N}/api/tg-hunter/v1/account/user`,s.startHuntPath=`${N}/api/tg-hunter/v1/user/gameplay/hunt/start`,s.activeHuntsPath=`${N}/api/tg-hunter/v1/user/gameplay/hunts/active`,s.hunterSkillsConfigPath=`${N}/api/tg-hunter/v1/user/gameplay/skills/config`,s.hunterSkillsPath=`${N}/api/tg-hunter/v1/user/gameplay/skills`,s.massiveSkillsUpgradePath=`${N}/api/tg-hunter/v1/user/gameplay/skills/upgrade`,s.huntersLeadeboardPath=`${N}/api/tg-hunter/v1/statistics/leaderboard`,s.getHuntStatusPath=e=>`${N}/api/tg-hunter/v1/user/gameplay/hunt/${e}/status`,s.getReferralsProfilesPath=e=>`${N}/api/tg-hunter/v1/account/user/referrals/${e}`,s.getRoadmapPath=e=>`${N}/api/tg-hunter/v1/general/content/roadmap/${e}`,s.getUpgradeSkillPath=(e,n)=>`${N}/api/tg-hunter/v1/user/gameplay/skill/${e}/${n}/upgrage`})(ye||(ye={}));const R=ye,kt={newHuntStatus:"loading",activeHuntStatus:"loading",activeHunts:null,lastFinishedHunt:null},te=L("user/events/hunt/start",async({huntType:s,refreshToken:e})=>{try{const o=(await $.post(R.startHuntPath,{huntTypeId:s},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded created hunt: ${JSON.stringify(o)}`),o.newHunt||null}catch(n){throw console.error(`Start new hunt failed, reason: ${n}`),new Error(`${n}`)}}),X=L("user/events/hunt/active",async({refreshToken:s})=>{try{const n=(await $.get(R.activeHuntsPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded active hunts: ${JSON.stringify(n)}`),n.activeHunts||null}catch(e){throw console.error(`Load active hunts failed, reason: ${e}`),new Error(`${e}`)}}),se=L("user/events/hunt/status",async({huntId:s,refreshToken:e})=>{try{const o=(await $.get(R.getHuntStatusPath(s),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded hunt status by id: ${s}, data: ${JSON.stringify(o)}`),o.huntStatus||null}catch(n){throw console.error(`Load hunt status by id: ${s} failed, reason: ${n}`),new Error(`${n}`)}}),Ve=E({name:"huntSystem",initialState:kt,reducers:{clearLastHunt:s=>{s.lastFinishedHunt=null}},extraReducers:s=>{s.addCase(te.pending,e=>{e.newHuntStatus="loading",console.log("⏳ Pending request to start new hunt...")}).addCase(te.fulfilled,(e,n)=>{var o;e.newHuntStatus="succeeded",(o=e.activeHunts)==null||o.push(n.payload),console.log("✅ New hunt successfully started")}).addCase(te.rejected,(e,n)=>{e.newHuntStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Start new hunt failed")}).addCase(X.pending,e=>{e.activeHuntStatus="loading",console.log("⏳ Pending request to load active hunts...")}).addCase(X.fulfilled,(e,n)=>{e.activeHuntStatus="succeeded",e.activeHunts=n.payload,console.log("✅ Active hunts successfully loaded")}).addCase(X.rejected,(e,n)=>{e.activeHuntStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Load active hunts failed")}).addCase(se.pending,e=>{e.activeHuntStatus="loading",console.log("⏳ Pending request to load target hunt status...")}).addCase(se.fulfilled,(e,n)=>{e.activeHuntStatus="succeeded",e.lastFinishedHunt=n.payload.status==="COMPLETED"?n.payload:null,console.log("✅ Target hunt status successfully loaded")}).addCase(se.rejected,(e,n)=>{e.activeHuntStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Load target hunt status failed")})}}),{clearLastHunt:jt}=Ve.actions,yt=Ve.reducer,Oe=s=>{const e=U(),n=d.useRef(!1),{refreshToken:o}=k(g=>g.authUser),{newHuntStatus:r,activeHuntStatus:a,activeHunts:c,lastFinishedHunt:l,error:i}=k(g=>g.huntSystem),u=(c==null?void 0:c[0])||null,p=d.useCallback(g=>{o&&e(te({huntType:g,refreshToken:o})).unwrap().then(()=>{V.success("New hunt started"),e(X({refreshToken:o}))}).catch(v=>{console.error(`Failed to start new hunt by type '${g}', reason: ${v}`),V.error("New hunt failed to start")})},[e,o]),f=d.useCallback(()=>{if(console.log(`IsRequested: ${n.current}, refresh token: ${!!o}`),!o||n.current)return;const g=c&&c.length>0,v=["loading","failed"].includes(a);s&&v&&!g&&(n.current=!0,e(X({refreshToken:o})))},[e,s,a,c,o]),h=d.useCallback(g=>{o&&e(se({huntId:g,refreshToken:o}))},[e,o]),m=d.useCallback(()=>{e(jt()),n.current=!1},[e]);return{currentHunt:u,activeHuntStatus:a,newHuntStatus:r,activeHunts:c,lastFinishedHunt:l,errorMessage:i,activeHuntsRequested:a==="succeeded"&&c&&c.length>0||a==="failed"&&(!c||c.length===0),startHunt:p,loadActiveHunts:f,checkHuntStatus:h,clearHuntResult:m}},wt=s=>{const{currentHunt:e,checkHuntStatus:n,lastFinishedHunt:o,clearHuntResult:r,...a}=Oe(s),c=d.useRef(null),l=d.useRef(!1),[i,u]=d.useState(null);return d.useEffect(()=>{if(!(e!=null&&e.finishAt))return;const p=()=>{const f=Math.floor(Date.now()/1e3),m=Number(e.finishAt)-f;m<=0?(c.current&&(clearInterval(c.current),c.current=null),u(null),l.current||(l.current=!0,n(e.id),setTimeout(()=>{l.current=!1},1e3))):u(m)};return p(),c.current&&clearInterval(c.current),c.current=setInterval(p,1e3),()=>clearInterval(c.current)},[e,n]),d.useEffect(()=>{if(!(o!=null&&o.huntResults))return;const p=setTimeout(()=>{r()},1e3);return()=>clearTimeout(p)},[o,r]),{...a,currentHunt:e,timeLeft:i,lastFinishedHunt:o,clearHuntResult:r}},St=({children:s,isAuthenticated:e})=>{const n=wt(e),o=d.useMemo(()=>n,[n]);return t.jsx(Ee.Provider,{value:o,children:s})},He=()=>{const s=d.useRef(!1),e=window.Telegram.WebApp,n=["tdesktop","macos"].includes(e.platform),o=window.Telegram.WebApp.platform==="unknown",r=!n&&!o,a=e.isFullscreen;d.useEffect(()=>{!e||!r||s.current||(c(),l(),i(),p(),f(),s.current=!0)},[e,s,n,o]);const c=()=>{e&&e.ready()},l=()=>{e&&e.expand()},i=()=>{e&&e.requestFullscreen()},u=()=>{e&&e.enableVerticalSwipes()},p=()=>{e&&e.disableVerticalSwipes()},f=()=>{e&&e.enableClosingConfirmation()};return{isTelegram:!!e&&!o,isOutsideTelegram:o,isDesktopPlatform:n,isMobilePlatform:r,isFullscreenRequested:a,expand:l,requestFullscreen:i,enableClosingConfirmation:f,disableClosingConfirmation:()=>{e&&e.disableClosingConfirmation()},enableVerticalSwiped:u,disableVerticalSwipes:p}};var Fe;const q=(Fe=window.Telegram)==null?void 0:Fe.WebApp;var we;(s=>{s.IsTelegram=()=>typeof window.Telegram<"u"&&(0,s.GetEncodedInitData)()!=null,s.GetEncodedInitData=()=>(q==null?void 0:q.initData)||"query_id=AAHacOUrAAAAANpw5SvUfm1t&user=%7B%22id%22%3A736456922%2C%22first_name%22%3A%22Mr%22%2C%22last_name%22%3A%22Veit%22%2C%22username%22%3A%22MrVeit%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2FkHEHvcqBDQz8-7hxmczRHHio9dWTTmaBg37PVJmU7eg.svg%22%7D&auth_date=1750018696&signature=TDuWw9JIQEhJC3LyZpwshcSkCfJqTctm9J5vF7TS8bF6lL081II8PqEGHaEI6Kbzbd-wFSyyGq97IOqikQ9PAw&hash=a0f30f9b5ecbf96682607563670874cbe60f8ea9e69aab4ea83e26b6353593c9",s.GetUnsafeInitData=()=>(q==null?void 0:q.initDataUnsafe)||null,s.GetUserProfile=()=>{const n=(0,s.GetUnsafeInitData)();return(n==null?void 0:n.user)||null},s.GetUsername=()=>{const n=(0,s.GetUserProfile)();return(n==null?void 0:n.username)||null},s.GetNameOrUsername=()=>{const n=(0,s.GetUsername)(),o=(0,s.GetFullName)();return n||o},s.GetFullName=()=>{const n=(0,s.GetUserProfile)(),o=n==null?void 0:n.first_name,r=(n==null?void 0:n.last_name)||null;return r?`${o} ${r}`:o},s.GetAvatarUrl=()=>{const n=(0,s.GetUserProfile)();return(n==null?void 0:n.photo_url)||null};function e(){const n={id:7011940758,parentId:null,first_name:"Satoshi Nakamoto",last_name:null,language_code:"ru",photo_url:"https://t.me/i/userpic/320/kHEHvcqBDQz8-7hxmczRHHio9dWTTmaBg37PVJmU7eg.svg",is_premium:!0},o=(0,s.GetUnsafeInitData)(),r=(0,s.GetUserProfile)()||n,a=o==null?void 0:o.start_param;let c=null;if(a){const i=a.match(/^ref_(\d+)$/);i&&(c=i[1])}return{id:r==null?void 0:r.id,parentId:c,firstName:r==null?void 0:r.first_name,lastName:(r==null?void 0:r.last_name)||null,username:(r==null?void 0:r.username)||null,photoUrl:(r==null?void 0:r.photo_url)||null,countryCode:r==null?void 0:r.language_code,isPremium:(r==null?void 0:r.is_premium)||!1}||n}s.GetNewProfilyByUnsafeInitData=e})(we||(we={}));const Y=we,K="accessToken",Z="refreshToken",It={status:"loading",accountStatus:"loading",sessionStatus:"loading",accessToken:localStorage.getItem(K)||null,refreshToken:localStorage.getItem(Z)||null},ne=L("user/createSession",async({encodedInitData:s})=>{try{return(await $.post(R.createSessionPath,{encodedInitData:s})).data||null}catch(e){throw console.error(`❌ First authentication failed, reason: ${e}`),new Error("First authentication step failed")}}),re=L("user/createAccount",async({accessToken:s,newProfile:e})=>{try{const n={id:e==null?void 0:e.id,parentId:e==null?void 0:e.parentId,firstName:e==null?void 0:e.firstName,lastName:e==null?void 0:e.lastName,username:e==null?void 0:e.username,ipAddress:null,isPremium:e==null?void 0:e.isPremium,countryCode:e==null?void 0:e.countryCode,photoUrl:e==null?void 0:e.photoUrl};return(await $.post(R.createAccountPath,{userProfile:n},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data||null}catch(n){throw console.error(`❌ Create account with internal data failed, data: ${JSON.stringify(e)}, reason: ${n}`),new Error("Create account with internal data failed")}}),oe=L("user/refreshSession",async({refreshToken:s})=>{try{return(await $.put(R.refreshSessionPath,{},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data||null}catch(e){throw console.error(`❌ Update session failed, reason: ${e}`),new Error("Update session failed")}}),qe=E({name:"authSession",initialState:It,reducers:{setAccessToken:(s,e)=>{s.accessToken=e.payload,localStorage.setItem(K,e.payload)},setRefreshToken:(s,e)=>{s.refreshToken=e.payload,localStorage.setItem(Z,e.payload)},clearSession:s=>{localStorage.removeItem(K),localStorage.removeItem(Z),s.status="loading",s.accountStatus="loading",s.sessionStatus="loading",s.accessToken=null,s.refreshToken=null}},extraReducers:s=>{s.addCase(ne.pending,e=>{e.status="loading"}).addCase(ne.fulfilled,(e,n)=>{e.status="succeeded",e.accessToken=n.payload.accessToken,localStorage.setItem(K,n.payload.accessToken)}).addCase(ne.rejected,(e,n)=>{e.status="failed",e.error=n.error.message||"Unknown error"}).addCase(re.pending,e=>{e.accountStatus="loading"}).addCase(re.fulfilled,(e,n)=>{const{userProfile:o,refreshToken:r}=n.payload;e.refreshToken=r,e.userProfile=o,localStorage.setItem(Z,r),e.accountStatus="succeeded",console.log("✅ User successful authorized")}).addCase(re.rejected,(e,n)=>{e.accountStatus="failed",e.error=n.error.message,console.error("❌ User authorization failed")}).addCase(oe.pending,e=>{e.sessionStatus="loading",console.log("⏳ Attempting to refresh session...")}).addCase(oe.fulfilled,(e,n)=>{const{refreshToken:o}=n.payload;if(e.refreshToken===o){console.warn("⚠️ Refresh token already updated, skipping refresh...");return}e.status="succeeded",e.sessionStatus="succeeded",e.accountStatus="succeeded",e.refreshToken=o,localStorage.setItem(Z,o),console.log("✅ User session sucessfully updated")}).addCase(oe.rejected,(e,n)=>{e.status="loading",e.accountStatus="loading",e.sessionStatus="failed",e.error=n.error.message||"Unknown error",e.accessToken=null,e.refreshToken=null,localStorage.removeItem(Z),localStorage.removeItem(K),console.error(`❌ Session refresh failed: ${e.error}`)})}}),{setAccessToken:Jc,setRefreshToken:Kc,clearSession:Nt}=qe.actions,bt=qe.reducer,Ht=()=>{const s=U();return{authenticateUser:a=>{s(ne({encodedInitData:a}))},createUserAccount:(a,c)=>{s(re({accessToken:a,newProfile:c}))},updateUserSession:a=>{s(oe({refreshToken:a}))},clearUserSession:()=>{s(Nt())}}},Tt=(s={})=>{const{autoCreateSession:e=!0,autoCreateAccount:n=!0,autoRefresh:o=!0,autoClearOnFail:r=!0}=s,{accessToken:a,refreshToken:c,userProfile:l,error:i,status:u,accountStatus:p,sessionStatus:f}=k(J=>J.authUser),{authenticateUser:h,createUserAccount:m,updateUserSession:g,clearUserSession:v}=Ht(),[x,b]=d.useState(null),[H,D]=d.useState(null),[M,T]=d.useState(!1),P=d.useRef(!1),O=d.useRef(!1),z=Y.GetEncodedInitData(),G=Y.GetNewProfilyByUnsafeInitData();return d.useEffect(()=>{z&&!x&&b(z),G&&!H&&D(G)},[z,G]),d.useEffect(()=>{o&&c&&f==="loading"&&!l&&!O.current&&(O.current=!0,g(c))},[o,c,f,l]),d.useEffect(()=>{r&&f==="failed"&&!c&&!a&&!M&&(v(),P.current=!1,T(!0))},[r,f,c,a]),d.useEffect(()=>{e&&x&&!a&&!c&&u==="loading"&&h(x)},[e,x,a,c,u]),d.useEffect(()=>{n&&a&&!c&&H&&p==="loading"&&!P.current&&(m(a,H),P.current=!0)},[n,a,c,H,p]),{authStatus:u,sessionStatus:f,accountStatus:p,accessToken:a,refreshToken:c,userProfile:l}},Q=()=>{const{accessToken:s,refreshToken:e,status:n,sessionStatus:o,accountStatus:r,error:a}=k(c=>c.authUser);return{accessToken:s,refreshToken:e,authStatus:n,sessionStatus:o,accountStatus:r,error:a,isAuthenticated:!!s&&!!e}},Bt={profileStatus:"loading",perksStatus:"loading",profile:null,perks:null,perksConfig:null,progress:null},ae=L("user/fetchProfile",async({refreshToken:s})=>{try{return(await $.get(R.playerAccountPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.userProfile||null}catch(e){throw console.error(`❌ Load user profile failed, reason: ${e}`),new Error("Load user profile failed")}}),ce=L("user/hunter/skills/config",async({refreshToken:s})=>{try{const n=(await $.get(R.hunterSkillsConfigPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded skills config: ${JSON.stringify(n)}`),n.skillsConfig||null}catch(e){throw console.error(`❌ Fetch skills config failed, reason: ${e}`),new Error(`${e}`)}}),ie=L("user/hunters/base/skills",async({refreshToken:s})=>{try{const n=(await $.get(R.hunterSkillsPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded hunter skills: ${JSON.stringify(n)}`),n.hunterSkills||null}catch(e){throw console.error(`❌ Fetch hunter skills failed, reason: ${e}`),new Error(`${e}`)}}),le=L("user/hunters/base/skills/upgrade",async({upgradeSkills:s,refreshToken:e})=>{try{const o=(await $.put(R.massiveSkillsUpgradePath,{upgradedSkills:s},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded upgraded skills data: ${JSON.stringify(s)}`),o.upgradedSkills||null}catch(n){throw console.error(`❌ Upgrade hunter skills failed, reason: ${n}`),new Error(`${n}`)}}),de=L("user/hunters/base/skill/upgrade",async({targetSkill:s,refreshToken:e})=>{const{type:n,amount:o}=s,r=R.getUpgradeSkillPath(n,o);try{return(await $.put(r,{},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data.upgradedSkill||null}catch(a){throw console.error(`❌ Upgrade target hunter skill failed, reason: ${a}`),new Error(`${a}`)}}),We=E({name:"user",initialState:Bt,reducers:{clearProfile:s=>{s.profileStatus="loading",s.profile=null,s.error=void 0},updateProgress:(s,e)=>{s.profile&&(s.profile.gameProfile=e.payload)},updateInventory:(s,e)=>{s.profile&&(s.profile.inventory=e.payload)},updateSkills:(s,e)=>{!s.profile||!s.perks||(s.perks=e.payload)},increasePoint:(s,e)=>{!s.profile||!s.profile.gameProfile||(s.profile.gameProfile.upgradePoints+=e.payload)},decreasePoint:(s,e)=>{!s.profile||!s.profile.gameProfile||(s.profile.gameProfile.upgradePoints-=e.payload)}},extraReducers:s=>{s.addCase(ae.pending,e=>{e.profileStatus="loading",console.log("⏳ Pending request to load user account")}).addCase(ae.fulfilled,(e,n)=>{e.profileStatus="succeeded",e.profile=n.payload,console.log("✅ User profile successfully loaded")}).addCase(ae.rejected,(e,n)=>{e.profileStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Request user account failed")}).addCase(ie.pending,e=>{e.perksStatus="loading",console.log("⏳ Pending request to load hunter skills")}).addCase(ie.fulfilled,(e,n)=>{e.perksStatus="succeeded",e.perks=n.payload,console.log("✅ Hunter skills successfully loaded")}).addCase(ie.rejected,(e,n)=>{e.perksStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Request hunter skills failed")}).addCase(ce.pending,e=>{e.perksStatus="loading",console.log("⏳ Pending request to load skills config")}).addCase(ce.fulfilled,(e,n)=>{e.perksStatus="succeeded",e.perksConfig=n.payload,console.log("✅ Skills config successfully loaded")}).addCase(ce.rejected,(e,n)=>{e.perksStatus="failed",e.error=n.error.message||"Unknown error",console.log("❌ Fetch skills config failed")}).addCase(le.pending,e=>{e.perksStatus="loading",console.log("⏳ Pending request to upgrade hunter skills")}).addCase(le.fulfilled,(e,n)=>{e.perksStatus="succeeded",e.perks=n.payload.updatedPerks,e.progress=n.payload.upgradedProgress,console.log("✅ Hunter skills successfully upgraded")}).addCase(le.rejected,(e,n)=>{e.perksStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Upgrade hunter skills failed")}).addCase(de.pending,e=>{e.perksStatus="loading",console.log("⏳ Pending request ot upgrade targer hunter skill")}).addCase(de.fulfilled,(e,n)=>{e.perksStatus="succeeded",e.perks=n.payload.updatedPerks,e.progress=n.payload.upgradedProgress,console.log("✅ Hunter target skill successfully upgraded")}).addCase(de.rejected,(e,n)=>{e.perksStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Upgrade target hunter skill failed")})}}),{clearProfile:Xc,updateProgress:Lt,updateInventory:$t,updateSkills:Rt,increasePoint:Pt,decreasePoint:At}=We.actions,Ut=We.reducer,ve=s=>{const e=U(),{refreshToken:n,accountStatus:o}=k(I=>I.authUser),{profile:r,perks:a,perksConfig:c,profileStatus:l,perksStatus:i,error:u}=k(I=>I.user),p=d.useRef({profile:!1,perks:!1,perksConfig:!1}),h=o==="succeeded"&&(s&&!!n),m=!p.current.profile&&l!=="succeeded",g=!p.current.perks&&i!=="succeeded",v=!p.current.perksConfig&&i!=="succeeded",x=l==="succeeded",b=i==="succeeded",H=d.useCallback(()=>{n&&e(ce({refreshToken:n}))},[e,n]),D=d.useCallback(()=>{n&&e(ie({refreshToken:n}))},[e,n]),M=d.useCallback(()=>{n&&e(ae({refreshToken:n}))},[e,n]),T=d.useCallback(I=>{n&&e(de({targetSkill:I,refreshToken:n}))},[e,n]),P=d.useCallback(async I=>{if(!n)return;const lt=await e(le({upgradeSkills:I,refreshToken:n}));xt(lt)},[e,n]),O=d.useCallback(I=>{e(Lt(I))},[e]),z=d.useCallback(I=>{e($t(I))},[e]),G=d.useCallback(I=>{e(Rt(I))},[e]),J=d.useCallback(I=>{e(Pt(I))},[e]),it=d.useCallback(I=>{e(At(I))},[e]);return d.useEffect(()=>{!h||u||(m&&!r&&(M(),p.current.profile=!0),g&&!a&&(D(),p.current.perks=!0),v&&!c&&(H(),p.current.perksConfig=!0))},[h,m,g,r,a,u]),{isProfileReady:x,isPerksLoaded:b,profileStatus:l,perksStatus:i,addNewProgress:O,addNewInventory:z,addNewHunterSkills:G,increaseUpgradePoints:J,decreaseUpgradePoints:it,getProfile:M,getHunterSkills:D,getSkillsConfig:H,updateTargetSkill:T,updateHunterSkills:P}},Ft={huntStatus:"idle",streakStatus:"idle",huntTypes:null,dailyStreak:null},ue=L("config/fetchHuntTypes",async({refreshToken:s})=>{try{return(await $.get(R.huntsConfigsPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.huntTypes||null}catch(e){throw console.error(`❌ Load hunts configs failed, reason: ${e}`),new Error("Failed to load hunts configs")}}),pe=L("config/fetchDailyStreak",async({refreshToken:s})=>{try{return(await $.get(R.dailyStreakConfigsPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data.dailyStreak||null}catch(e){throw console.error(`❌ Load daily streaks failed, reason: ${e}`),new Error("Failed to load daily streaks")}}),Dt=E({name:"gameConfig",initialState:Ft,reducers:{},extraReducers:s=>{s.addCase(ue.pending,e=>{e.huntStatus="loading"}).addCase(ue.fulfilled,(e,n)=>{e.huntStatus="succeeded",e.huntTypes=n.payload,console.log("✅ Successfully loaded hunts presets")}).addCase(ue.rejected,(e,n)=>{e.huntStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Load hunts presets failed")}).addCase(pe.pending,e=>{e.streakStatus="loading"}).addCase(pe.fulfilled,(e,n)=>{e.streakStatus="succeeded",e.dailyStreak=n.payload,console.log("✅ Successfully loaded streaks presets")}).addCase(pe.rejected,(e,n)=>{e.streakStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Load streaks presets failed")})}}),Mt=Dt.reducer,Et=s=>{const e=U(),{refreshToken:n,accountStatus:o}=Q(),{dailyStreak:r,huntTypes:a,streakStatus:c,huntStatus:l,error:i}=k(m=>m.gameConfig),u=d.useRef({streak:!1,hunts:!1}),p=o==="succeeded"&&s&&!!n,f=!u.current.streak&&c!=="succeeded",h=!u.current.hunts&&l!=="succeeded";return d.useEffect(()=>{!p||i||(f&&!r&&(e(pe({refreshToken:n})),u.current.streak=!0),h&&!a&&(e(ue({refreshToken:n})),u.current.hunts=!0))},[p,f,h,u,r,a,i]),{huntTypes:a,dailyStreak:r,huntStatus:l,streakStatus:c,error:i,isLoaded:l==="succeeded"&&c==="succeeded"}},Vt={status:"loading",leaderboardStatus:"loading",totalAmount:0,pendingAmount:0,verifiedAmount:0,referrals:null,leaderboard:null},he=L("user/events/leaderboard/active",async({refreshToken:s})=>{try{const n=(await $.get(R.huntersLeadeboardPath,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data;return console.log(`Loaded active leaderboard: ${JSON.stringify(n)}`),n.leaderboard||null}catch(e){throw console.error(`Load active leaderboard failed, reason: ${e}`),new Error("Failed to load active leaderboard")}}),me=L("user/social/referrals",async({refreshToken:s})=>{try{const n=(await $.get(`${R.getReferralsProfilesPath(100)}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data;return console.log(`Claimed referrals list: ${JSON.stringify(n)}`),n||null}catch(e){throw console.error(`Failed to load referrals list, reason: ${e}`),new Error(`${e}`)}}),Ot=E({name:"userSocial",initialState:Vt,reducers:{},extraReducers:s=>{s.addCase(me.pending,e=>{e.status="loading",console.log("⏳ Pending request to load friends list")}).addCase(me.fulfilled,(e,n)=>{const{totalAmount:o,pendingAmount:r,verifiedAmount:a,referrals:c}=n.payload;e.status="succeeded",e.totalAmount=o,e.verifiedAmount=a,e.pendingAmount=r,e.referrals=c,console.log("✅ Friends list successfully loaded")}).addCase(me.rejected,(e,n)=>{e.status="failed",e.error=n.error.message||"Unknown error",console.error("❌ Load friends list failed")}).addCase(he.pending,e=>{e.leaderboardStatus="loading",console.log("⏳ Pending request to load active leaderboard...")}).addCase(he.fulfilled,(e,n)=>{e.leaderboardStatus="succeeded",e.leaderboard=n.payload,console.log("✅ Active leaderboard successfully loaded")}).addCase(he.rejected,(e,n)=>{e.leaderboardStatus="failed",e.error=n.error.message||"Unknown error",console.error("❌ Load active leaderboard failed")})}}),qt=Ot.reducer,Ze=s=>{const e=U(),{refreshToken:n,accountStatus:o}=Q(),{leaderboardStatus:r,leaderboard:a,error:c}=k(h=>h.social),l=d.useRef(!1),i=o==="succeeded"&&s&&!!n,u=!l.current&&r!=="succeeded",p=()=>{n&&e(me({refreshToken:n}))},f=()=>{n&&e(he({refreshToken:n}))};return d.useEffect(()=>{!i||c||u&&!a&&(f(),l.current=!0)},[i,u,l,a,c]),{leaderboardStatus:r,leaderboard:a,isLeaderboardLoaded:r==="succeeded",isLeaderboardRequested:l.current,getFriends:p,getLeaderboard:f}},S=dt.memo(({src:s,className:e,alt:n,loadingType:o,onError:r,...a})=>t.jsx("img",{src:s,className:e,alt:n,loading:o,onError:r,...a})),Wt="/Hunter-Demo-Build/icons/WoodBackground.webp",Zt="/Hunter-Demo-Build/icons/AppLogo.webp",zt="loadContainer__4xaTP",Gt="loadContainerBackground__-1kLy",Jt="loaderContainer__L6tjc",Kt="loaderIconBackground__kLKwu",Xt="bounce__oxYeT",Yt="loaderIcon__WN4GY",Qt="loaderHeader__ifac2",W={loadContainer:zt,loadContainerBackground:Gt,loaderContainer:Jt,loaderIconBackground:Kt,bounce:Xt,loaderIcon:Yt,loaderHeader:Qt},es=()=>t.jsxs("div",{className:W.loadContainer,children:[t.jsx(S,{src:Wt,className:W.loadContainerBackground,alt:"Background"}),t.jsxs("div",{className:W.loaderContainer,children:[t.jsx("div",{className:W.loaderIconBackground,children:t.jsx(S,{src:Zt,className:W.loaderIcon,alt:"Loading"})}),t.jsx("span",{className:W.loaderHeader,children:"Loading..."})]})]}),ts={huntStartModal:!1,perks:!1},ze=E({name:"modals",initialState:ts,reducers:{huntStartModal:(s,e)=>{s.huntStartModal=e.payload},perksModal:(s,e)=>{s.perks=e.payload}}}),{huntStartModal:Ge,perksModal:Je}=ze.actions,ss=ze.reducer,ns={huntingResult:null},Ke=E({name:"notification",initialState:ns,reducers:{setHuntingResult:(s,e)=>{s.huntingResult=e.payload}}}),{setHuntingResult:Xe}=Ke.actions,rs=Ke.reducer,Ye=()=>{const s=d.useContext(Ee);if(!s)throw new Error("useHuntContext must be used within a HuntProvider");return s},os="timeIcon__7qE3r",as={timeIcon:os},cs="/Hunter-Demo-Build/icons/TimeIcon.webp",Qe=()=>t.jsx("div",{className:as.timeIcon,children:t.jsx(S,{src:cs,alt:"Time Icon"})}),is="coloredIcon__Q4j7n",ls={coloredIcon:is},ds=()=>t.jsx("div",{className:ls.coloredIcon,children:t.jsx(Qe,{})}),us="wrapper__UtU95",ps="fixedTop__YU1RT",hs="headerContainer__N2Cl-",ms="perksContainer__xn6II",fs="avatarZone__ywLox",gs="hunterAvatar__gmUnF",vs="postamentAvatar__F-vv-",xs="footer__Y-8RS",Cs="buttons__6fH8l",_s="side__BHChB",ks="item__zmkvH",js="btn__XrkC9",ys="text__bDeJ9",ws="huntButton__VqVeX",Ss="huntButtonInHunt__iY0WK",Is="huntButtonContent__XKfQV",Ns="huntText__6q4Vd",bs="huntTimer__BBFG4",Hs="huntTimerIcon__FpwC-",B={wrapper:us,fixedTop:ps,headerContainer:hs,perksContainer:ms,avatarZone:fs,hunterAvatar:gs,postamentAvatar:vs,footer:xs,buttons:Cs,side:_s,item:ks,btn:js,text:ys,huntButton:ws,huntButtonInHunt:Ss,huntButtonContent:Is,huntText:Ns,huntTimer:bs,huntTimerIcon:Hs},Ts=()=>{const s=U(),{currentHunt:e,timeLeft:n,lastFinishedHunt:o}=Ye(),{addNewProgress:r,addNewInventory:a}=ve(!0),c=k(h=>h.lang),l=!!e&&(n??0)>0,i=()=>{l||s(Ge(!0))},u=h=>{const m=h.huntResults;if(!m)return;const{collectedDucks:g,collectedExp:v,arrowsLeft:x}=m;s(Xe({ducks:g,arrows:x,experience:v}))},p=h=>{const m=h.gameProgress;if(!m)return;const{level:g,experiencePoints:v,upgradePoints:x,currentLevelXP:b,nextLevelXP:H}=m;r({level:g,experiencePoints:v,upgradePoints:x,currentLevelXP:b,nextLevelXP:H})},f=h=>{const m=h.resourcesAmount;if(!m)return;const{ducks:g,arrows:v,toncoins:x}=m;a({ducks:g,arrows:v,toncoins:x})};return d.useEffect(()=>{!o||!(o!=null&&o.huntResults)||(u(o),f(o),p(o))},[o,s]),t.jsx("button",{onClick:i,className:l?B.huntButtonInHunt:B.huntButton,children:l?t.jsxs("div",{className:B.huntButtonContent,children:[t.jsx("span",{className:B.huntText,children:c.homepage.inHuntLabel}),t.jsxs("span",{className:B.huntTimer,children:[t.jsx("div",{className:B.huntTimerIcon,children:t.jsx(ds,{})}),Bs(n||0)]})]}):c.homepage.startHuntButton})};function Bs(s){const e=Math.floor(s/3600),n=Math.floor(s%3600/60),o=s%60;return[e,n,o].map(r=>r.toString().padStart(2,"0")).join(":")}const Ls=()=>t.jsx("div",{className:B.buttons}),$s="perksButton__1Gg7k",Rs="perksModal__L61Py",Ps="perks__PgDTa",As="close__NvIWj",Us="closeBlock__AiCcX",Fs="closeText__S9Qaf",Ds="yourlvl__-zRl3",Ms="lvlText__Cy16N",Es="lvlIcon__YbWy7",Vs="lvlBtn__S9ZtC",Os="lvlButtonIcon__iPLps",qs="lvlProgress__A6Sv7",Ws="exp__-PdR4",Zs="title__lh34O",zs="description__BNb6u",Gs="listWrapper__7Iwg0",Js="list__CBL-w",Ks="item__tqrWS",Xs="btn__DotrF",Ys="buttonWrapper__la-4z",Qs="buttonIcon__MZxd2",en="titleIcon__AHU9o",_={perksButton:$s,perksModal:Rs,perks:Ps,close:As,closeBlock:Us,closeText:Fs,yourlvl:Ds,lvlText:Ms,lvlIcon:Es,lvlBtn:Vs,lvlButtonIcon:Os,lvlProgress:qs,exp:Ws,title:Zs,description:zs,listWrapper:Gs,list:Js,item:Ks,btn:Xs,buttonWrapper:Ys,buttonIcon:Qs,titleIcon:en},tn=()=>{var o,r;const s=U(),e=k(a=>a.lang.perks),n=k(a=>a.user);return t.jsxs("div",{className:_.perksButton,onClick:()=>{s(Je(!0))},children:[t.jsxs("svg",{width:"16",height:"13",viewBox:"0 0 16 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M6.87708 0.316059C7.27838 -0.105352 7.95784 -0.105354 8.35914 0.316059L14.805 7.085C15.4131 7.72367 14.9532 8.76894 14.0639 8.76894H1.17229C0.283065 8.76894 -0.176913 7.72367 0.431265 7.085L6.87708 0.316059Z",fill:"#381B15"}),t.jsx("path",{d:"M6.87708 0.316059C7.27838 -0.105352 7.95784 -0.105354 8.35914 0.316059L14.805 7.085C15.4131 7.72367 14.9532 8.76894 14.0639 8.76894H1.17229C0.283065 8.76894 -0.176913 7.72367 0.431265 7.085L6.87708 0.316059Z",fill:"#121802"}),t.jsx("path",{d:"M0 10.7689C0 10.2167 0.454766 9.76894 1.01575 9.76894H14.2205C14.7815 9.76894 15.2362 10.2167 15.2362 10.7689V11.7689C15.2362 12.3212 14.7815 12.7689 14.2205 12.7689H1.01575C0.454765 12.7689 0 12.3212 0 11.7689V10.7689Z",fill:"#381B15"}),t.jsx("path",{d:"M0 10.7689C0 10.2167 0.454766 9.76894 1.01575 9.76894H14.2205C14.7815 9.76894 15.2362 10.2167 15.2362 10.7689V11.7689C15.2362 12.3212 14.7815 12.7689 14.2205 12.7689H1.01575C0.454765 12.7689 0 12.3212 0 11.7689V10.7689Z",fill:"#121802"})]}),e.perksBtn,": ",(r=(o=n==null?void 0:n.profile)==null?void 0:o.gameProfile)==null?void 0:r.upgradePoints]})},sn="/Hunter-Demo-Build/icons/PostamentIcon.webp",nn="postamentIcon__TeTYC",rn={postamentIcon:nn},on=()=>t.jsx("div",{className:rn.postamentIcon,children:t.jsx(S,{src:sn,alt:"Postament Icon"})}),an="/Hunter-Demo-Build/icons/BaseHunterAvatar.webp",cn="hunterAvatar__qFfJl",ln={hunterAvatar:cn},dn=()=>t.jsx("div",{className:ln.hunterAvatar,children:t.jsx(S,{src:an,alt:"Hunter Avatar"})}),Se="/Hunter-Demo-Build/icons/EmptyAvatarIcon.webp",un="playerAvatar__VLv-r",pn={playerAvatar:un},hn=Y.GetAvatarUrl()||Se,Te=({photoUrl:s=hn,loadingType:e,borderRadius:n=50})=>{const o=s||Se;return t.jsx("div",{className:pn.playerAvatar,children:t.jsx(S,{src:o,alt:"Player Avatar",loadingType:e,style:{borderRadius:`${n}%`},onError:({currentTarget:r})=>{r.onerror=null,r.src=Se}})})},mn="duckIcon__HsKfo",fn={duckIcon:mn},gn="/Hunter-Demo-Build/icons/DuckIcon.webp",xe=()=>t.jsx("div",{className:fn.duckIcon,children:t.jsx(S,{src:gn,alt:"Duck Icon"})}),vn="bowIcon__5K7IH",xn={bowIcon:vn},Cn="/Hunter-Demo-Build/icons/BowIcon.webp",et=()=>t.jsx("div",{className:xn.bowIcon,children:t.jsx(S,{src:Cn,alt:"Bow Icon"})}),_n="tonIcon__kWEpP",kn={tonIcon:_n},jn="/Hunter-Demo-Build/icons/TonIcon.webp",yn=()=>t.jsx("div",{className:kn.tonIcon,children:t.jsx(S,{src:jn,alt:"Ton Icon"})}),wn="header__XNtLc",Sn="lside__J3AU3",In="rside__-cscl",Nn="avatar__ZmcK2",bn="content__8dGl8",Hn="username__IiTNR",Tn="lvl__OOh9C",Bn="levelProgress__J6xc-",Ln="progressBar__qh8Ln",$n="ducksContainer__ajE64",Rn="ducksIcon__9mtxx",Pn="ducksBalance__dExE3",An="arrowsContainer__rHCKA",Un="arrowsIcon__O2K3x",Fn="arrowsBalance__e1ZvL",Dn="tonsContainer__jllmI",Mn="tonIcon__uLcjo",En="tonsBalance__Vp-ZZ",w={header:wn,lside:Sn,rside:In,avatar:Nn,content:bn,username:Hn,lvl:Tn,levelProgress:Bn,progressBar:Ln,ducksContainer:$n,ducksIcon:Rn,ducksBalance:Pn,arrowsContainer:An,arrowsIcon:Un,arrowsBalance:Fn,tonsContainer:Dn,tonIcon:Mn,tonsBalance:En},Be=()=>{var v;const s=k(x=>x.user.profile),{isTelegram:e,isDesktopPlatform:n,isOutsideTelegram:o}=He(),r=n&&e||o,a=((v=s==null?void 0:s.gameProfile)==null?void 0:v.level)||0,c=(s==null?void 0:s.username)||(s==null?void 0:s.firstName),l=s==null?void 0:s.inventory,i=s==null?void 0:s.gameProfile,u=(l==null?void 0:l.ducks)||0,p=(l==null?void 0:l.arrows)||0,f=(l==null?void 0:l.toncoins)||0,h=Number(i==null?void 0:i.currentLevelXP)+Number(i==null?void 0:i.nextLevelXP),m=i&&i.nextLevelXP>0?i.currentLevelXP/h:0,g=Math.min(100,m*100);return t.jsxs("div",{className:w.header,style:{marginTop:r?48:"var(--tg-top)"},children:[t.jsxs("div",{className:w.lside,children:[t.jsx("div",{className:w.avatar,children:t.jsx(Te,{})}),t.jsxs("div",{className:w.content,children:[t.jsx("p",{className:w.username,children:c}),t.jsxs("p",{className:w.lvl,children:["lvl ",a]}),t.jsx("div",{className:w.levelProgress,children:t.jsx("div",{className:w.progressBar,style:{width:`${g}%`}})})]})]}),t.jsxs("div",{className:w.rside,children:[t.jsxs("div",{className:w.ducksContainer,children:[t.jsx("div",{className:w.ducksIcon,children:t.jsx(xe,{})}),t.jsx("span",{className:w.ducksBalance,children:u})]}),t.jsxs("div",{className:w.arrowsContainer,children:[t.jsx("div",{className:w.arrowsIcon,children:t.jsx(et,{})}),t.jsx("span",{className:w.arrowsBalance,children:p})]}),t.jsxs("div",{className:w.tonsContainer,children:[t.jsx("div",{className:w.tonIcon,children:t.jsx(yn,{})}),t.jsx("span",{className:w.tonsBalance,children:f})]})]})]})},Vn="Back",On="Receive",qn={title:"THE HUNT IS OVER",text:"TOTAL HARVEST",btn:"Claim"},Wn={titles:["Short","Middle","Long"],text1:"Duration",text2:"Potential yield",hours:["hours","hours","hours"],ducks:"ducks"},Zn={startHuntButton:"Start hunting",inHuntLabel:"On the hunt"},zn={perksBtn:"Skill points",lvlText:"Your skill points",experience:{title:"Hunt experience",description:"gives a bonus to hunting efficiency. It levels up automatically as you play."},accuracy:{title:"Accuracy",description:"reduces the number of misses and increases duck harvest."},luck:{title:"Luck",description:"increases the chance of a larger harvest."},speed:{title:"Speed",description:"increases arrow consumption to get more prey."},stamina:{title:"Stamina",description:"reduces the number of misses and increases duck catch."},list:[{title:"Accuracy",description:"reduces the number of misses and increases duck harvest."},{title:"Luck",description:"increases the chance of a larger harvest."},{title:"Speed",description:"increases arrow consumption to get more prey."},{title:"Stamina",description:"reduces the number of misses and increases duck catch."}]},Gn={title:"Merchant's bench",text:"Here you can buy goods for TON",sectionTitle:{arrows:"Arrows",exp:"Skill points",nfts:"NFTs"}},Jn={types:"subscribe",daily:!0,title:"Daily tasks",description:"gives a bonus to hunting efficiency. It levels up automatically as you play."},Kn={daily:!0,oneTime:!0},Xn={map:"Daily checkup card"},Yn={back:Vn,getReward:On,huntOverModal:qn,huntStartModal:Wn,homepage:Zn,perks:zn,market:Gn,tasks:Jn,types:Kn,daily:Xn},Qn=Yn,tt=E({name:"language",initialState:Qn,reducers:{changeLanguage:(s,e)=>e.payload}});tt.actions;const er=tt.reducer,tr="wrapper__luRq5",sr="lang__qhk3t",nr="list__ET0-g",rr="item__A7f-6",ee={wrapper:tr,lang:sr,list:nr,item:rr},Ce=[{icon:t.jsx(ar,{}),name:"Eng",url:"https://static.tghunter.cc/wa_langs/langpack_en.json"},{icon:t.jsx(or,{}),name:"Rus",url:"https://static.tghunter.cc/wa_langs/langpack_ru.json"},{icon:t.jsx(cr,{}),name:"Cn",url:"https://static.tghunter.cc/wa_langs/langpack_cn.json"}],Le=()=>{U();const[s,e]=d.useState(!1),[n,o]=d.useState(Number(localStorage.getItem("lang"))||0),{isTelegram:r,isDesktopPlatform:a,isOutsideTelegram:c}=He(),l=a&&r||c;return t.jsxs("div",{className:ee.wrapper,style:{marginTop:l?0:"var(--tg-system-top)"},children:[t.jsxs("div",{className:ee.lang,children:[Ce[n].icon," ",Ce[n].name]}),s&&t.jsx("div",{className:ee.list,children:Ce.map((i,u)=>t.jsxs("div",{className:ee.item,children:[i.icon," ",i.name]},u))})]})};function or(){return t.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{clipPath:"url(#clip0_380_4282)",children:[t.jsx("rect",{width:"15",height:"15",rx:"7.5",fill:"#1A47B8"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M-2 10H19V15H-2V10Z",fill:"#F93939"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M-2 0H19V5H-2V0Z",fill:"white"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_380_4282",children:t.jsx("rect",{width:"15",height:"15",rx:"7.5",fill:"white"})})})]})}function ar(){return t.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{clipPath:"url(#clip0_380_4503)",children:[t.jsx("rect",{width:"15",height:"15",rx:"7.5",fill:"white"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 0H18V1H4V0ZM4 2H18V3H4V2ZM4 4H18V5H4V4ZM4 6H18V7H4V6ZM-3 8H18V9H-3V8ZM-3 10H18V11H-3V10ZM-3 12H18V13H-3V12Z",fill:"#F93939"}),t.jsx("path",{d:"M18 14H-3V15H18V14Z",fill:"#F93939"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0H7V7H0V0Z",fill:"#1A47B8"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.44 4.89699L1.932 5.68999L2.22 4.00999L1 2.82299L2.686 2.57799L3.44 1.04999L4.194 2.57699L5.88 2.82199L4.66 4.01199L4.948 5.68999",fill:"white"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_380_4503",children:t.jsx("rect",{width:"15",height:"15",rx:"7.5",fill:"white"})})})]})}function cr(){return t.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{clipPath:"url(#clip0_380_4506)",children:[t.jsx("rect",{width:"15",height:"15",rx:"7.5",fill:"#F93939"}),t.jsx("path",{d:"M19 0H2C0.89543 0 0 0.89543 0 2V13C0 14.1046 0.89543 15 2 15H19C20.1046 15 21 14.1046 21 13V2C21 0.89543 20.1046 0 19 0Z",fill:"#F93939"}),t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49812 7.23L4.02812 8.003L4.30812 6.366L3.12012 5.206L4.76312 4.969L5.49812 3.479L6.23212 4.969L7.87512 5.206L6.68512 6.366L6.96712 8.002L5.49812 7.23ZM9.00012 3H10.0001V4H9.00012V3ZM10.0001 5H11.0001V6H10.0001V5ZM10.0001 7H11.0001V8H10.0001V7ZM9.00012 9H10.0001V10H9.00012V9Z",fill:"#FFDA2C"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_380_4506",children:t.jsx("rect",{width:"15",height:"15",rx:"7.5",fill:"white"})})})]})}const ir=()=>t.jsxs("div",{className:B.wrapper,children:[t.jsx("div",{className:B.fixedTop,children:t.jsx(Le,{})}),t.jsx("div",{className:B.headerContainer,children:t.jsx(Be,{})}),t.jsx("div",{className:B.perksContainer,children:t.jsx(tn,{})}),t.jsx("div",{className:B.buttons,children:t.jsx(Ls,{})}),t.jsxs("div",{className:B.avatarZone,children:[t.jsx("div",{className:B.hunterAvatar,children:t.jsx(dn,{})}),t.jsx("div",{className:B.postamentAvatar,children:t.jsx(on,{})})]}),t.jsx("div",{className:B.footer,children:t.jsx(Ts,{})})]}),lr="patternWrapper__KdW3l",dr="icon__vIVaP",_e={patternWrapper:lr,icon:dr,"pattern-position-1":"pattern-position-1__3dmQ-","pattern-position-2":"pattern-position-2__WouXl","pattern-position-3":"pattern-position-3__AznE9","pattern-position-4":"pattern-position-4__0EEi2","pattern-position-5":"pattern-position-5__NFswc","pattern-position-6":"pattern-position-6__7IKYH"},ur=["pattern-position-1","pattern-position-2","pattern-position-3","pattern-position-4","pattern-position-5","pattern-position-6"],$e=({icon:s})=>t.jsx("div",{className:_e.patternWrapper,children:ur.map((e,n)=>t.jsx("img",{src:s,className:Ne(_e.icon,_e[e]),alt:"Background Icon"},n))}),Re="/Hunter-Demo-Build/icons/HuntIcon.webp",pr="huntStartModal__3UU5l",hr="modal__A0Jfi",mr="close__nTY9u",fr="huntListWrapper__Pt3jk",gr="huntList__6vNss",vr="item__ORd5g",xr="button__RZdN-",Cr="startHuntIcon__RQ0-j",_r="durationWrapper__BIq8O",kr="lootWraper__sZR9v",jr="durationIcon__fxPJb",yr="durationText__5zAWz",wr="lootIcon__qxpuT",Sr="lootText__JkxOw",Ir="header__2Ov-O",Nr="rside__0-rFg",br="title__JEud8",Hr="description__wbH-7",Tr="text__0shF2",y={huntStartModal:pr,modal:hr,close:mr,huntListWrapper:fr,huntList:gr,item:vr,button:xr,startHuntIcon:Cr,durationWrapper:_r,lootWraper:kr,durationIcon:jr,durationText:yr,lootIcon:wr,lootText:Sr,header:Ir,rside:Nr,title:br,description:Hr,text:Tr},Br=()=>{const s=U(),{startHunt:e}=Ye(),{addNewInventory:n}=ve(!0),o=k(h=>h.lang),r=k(h=>{var m;return(m=h.user.profile)==null?void 0:m.inventory}),a=k(h=>h.gameConfig.huntTypes),c=k(h=>h.modals.huntStartModal),l=Number(r==null?void 0:r.arrows),i=Number(r==null?void 0:r.ducks),u=Number(r==null?void 0:r.toncoins),p=()=>{s(Ge(!1))},f=(h,m)=>{if(l<m){V.warn("No arrows to start hunting"),console.warn(`Not enough resources for start hunt, balance: ${l}, price: ${m}`);return}e(h);const g={ducks:i,arrows:l-m,toncoins:u};n(g),p()};return t.jsx(be,{children:c&&t.jsx("div",{className:y.huntStartModal,children:t.jsxs(ge.div,{initial:{top:"100%"},animate:{top:"30%"},exit:{top:"100%"},className:y.modal,children:[t.jsx("button",{className:y.close,onClick:p,children:o.back}),t.jsx("div",{className:y.huntListWrapper,children:t.jsx("div",{className:y.huntList,children:a&&Lr(a,o,f)})})]})})})},Lr=(s,e,n)=>s.map((o,r)=>{const{duration:a,arrowCost:c,minReward:l,maxReward:i}=o,u=(a/3600).toFixed(1),p=`${l} - ${i}`,f=`${e.huntStartModal.text1}: ${a} ${e.huntStartModal.hours[r]}`,h=`${e.huntStartModal.text2}: ${p} ${e.huntStartModal.ducks}`;return t.jsxs("div",{className:y.item,children:[t.jsx($e,{icon:Re}),t.jsxs("div",{className:y.header,children:[t.jsx("h3",{className:y.title,children:e.huntStartModal.titles[r]}),t.jsxs("div",{className:y.rside,children:[t.jsxs("div",{className:y.durationWrapper,children:[t.jsx("div",{className:y.durationIcon,children:t.jsx(Qe,{})}),t.jsxs("span",{className:y.durationText,children:[u," ",e.huntStartModal.hours[r]]})]}),t.jsxs("div",{className:y.lootWraper,children:[t.jsx("div",{className:y.lootIcon,children:t.jsx(xe,{})}),t.jsx("span",{className:y.lootText,children:p})]})]})]}),t.jsxs("div",{className:y.description,children:[t.jsx("p",{className:y.text,children:f}),t.jsx("p",{className:y.text,children:h})]}),t.jsxs("button",{className:y.button,onClick:()=>{n(o.type,c)},children:["-",c,t.jsx("div",{className:y.startHuntIcon,children:t.jsx(et,{})})]})]},r)}),$r="wrapper__fS-zv",Rr="overlay__uxKuJ",Pr="result__6Pnxe",Ar="title__IzICH",Ur="text__jKVMX",Fr="btn__AxGHU",Dr="results__b1pss",Mr="item__SmhFr",Er="span__U-Uzv",F={wrapper:$r,overlay:Rr,result:Pr,title:Ar,text:Ur,btn:Fr,results:Dr,item:Mr,span:Er},Vr=()=>{const s=U(),e=k(r=>r.lang),n=k(r=>r.notification.huntingResult),o=()=>{s(Xe(null))};return t.jsx(be,{children:n!==null&&t.jsxs("div",{className:F.wrapper,children:[t.jsx(ge.div,{initial:{opacity:0},animate:{opacity:.45},exit:{opacity:0},className:F.overlay}),t.jsxs(ge.div,{initial:{opacity:0,marginTop:-20},animate:{opacity:1,marginTop:0},exit:{opacity:0,marginTop:-20},className:F.result,children:[t.jsx("h1",{className:F.title,children:e.huntOverModal.title}),t.jsx("p",{className:F.text,children:e.huntOverModal.text}),t.jsxs("div",{className:F.results,children:[t.jsxs("div",{className:F.item,children:["+ ",n.ducks,t.jsx("span",{children:"🦆"})]}),t.jsxs("div",{className:F.item,children:["+ ",n.arrows,t.jsx("span",{children:"🏹"})]}),t.jsxs("div",{className:F.item,children:["+ ",n.ducks,t.jsx("span",{children:"XP"})]})]}),t.jsx("button",{className:F.btn,onClick:o,children:e.huntOverModal.btn})]})]})})},Or=s=>{const[e,n]=d.useState(s),[o,r]=d.useState(0),a=d.useRef(s),{perksConfig:c}=k(v=>v.user),{updateHunterSkills:l,addNewHunterSkills:i,decreaseUpgradePoints:u,increaseUpgradePoints:p}=ve(!0),f=d.useCallback(v=>{if(!e||!c)return;if(g(v)){V.warn("Reached maximum skill level");return}const x={...e,[v]:e[v]+1};n(x),r(b=>b+1),i(e),u(1)},[e,c,i,u]),h=d.useCallback(()=>{a.current&&(i(a.current),p(o))},[o,i,p]),m=d.useCallback(async()=>{if(!e||!a.current)return;const v=Object.entries(e).filter(([x])=>x!=="experience").map(([x,b])=>{var M;const H=((M=a.current)==null?void 0:M[x])??0,D=b-H;return{type:x,amount:D}}).filter(x=>x.amount>0);if(v.length!==0)try{await l(v),a.current=e,V.success("Perks successfully updated"),console.log("✅ Sucessfully commited perks changes")}catch{h(),V.error("Update perks failed")}},[e,l,h]);function g(v){const x=c==null?void 0:c.find(H=>H.skill===v);return!x||!e?(console.warn(`Config not found for skill ${v}`),!0):e[v]>=x.maxLevel}return{pendingPerks:e,upgradeSkill:f,commitChanges:m,rollback:h}},qr="/Hunter-Demo-Build/icons/BoostIcon.webp",Wr="boostIcon__5Vv06",Zr={boostIcon:Wr},zr={white:"invert(0%) brightness(100%)",black:"invert(100%) brightness(100%)",disabled:"brightness(0) opacity(35%)"},st=({color:s="white"})=>t.jsx("div",{className:Zr.boostIcon,children:t.jsx(S,{src:qr,alt:"Boost Icon",style:{filter:zr[s]}})}),Gr="/Hunter-Demo-Build/icons/UnionIcon.webp",Jr="/Hunter-Demo-Build/icons/SpeedIcon.webp",Kr="/Hunter-Demo-Build/icons/CrosshairIcon.webp",Xr="/Hunter-Demo-Build/icons/AwardIcon.webp",Yr=({perks:s,onUpgrade:e})=>{var c,l;const n=k(i=>i.lang.perks),o=k(i=>i.user),r=Number((l=(c=o.profile)==null?void 0:c.gameProfile)==null?void 0:l.upgradePoints),a=d.useMemo(()=>[{type:"accuracy",amount:(s==null?void 0:s.accuracy)||0,iconPath:Kr},{type:"luck",amount:(s==null?void 0:s.luck)||0,iconPath:Xr},{type:"speed",amount:(s==null?void 0:s.speed)||0,iconPath:Jr},{type:"stamina",amount:(s==null?void 0:s.stamina)||0,iconPath:Gr}],[s]);return t.jsx("div",{className:_.listWrapper,children:t.jsx("div",{className:_.list,children:o&&a.map((i,u)=>{const p=a[u],f=p.iconPath,h=p.amount,m=n.list[u];return t.jsxs("div",{className:_.item,children:[t.jsx($e,{icon:f}),t.jsx("div",{className:_.content,children:t.jsxs("div",{children:[t.jsxs("div",{className:_.title,children:[m.title," ",h,t.jsx("img",{src:f,className:_.titleIcon})]}),t.jsx("div",{className:_.description,children:m.description})]})}),t.jsx("div",{className:_.buttonWrapper,children:t.jsx("button",{onClick:()=>e(p.type),className:_.btn,disabled:r<=0,children:t.jsx("div",{className:_.buttonIcon,children:t.jsx(st,{color:r===0?"disabled":"black"})})})})]},u)})})})},Qr="/Hunter-Demo-Build/icons/PlusIcon.webp",eo="plusIcon__bC0CF",to={plusIcon:eo},so=()=>t.jsx("div",{className:to.plusIcon,children:t.jsx(S,{src:Qr,alt:"Plus Icon"})}),no="huntIcon__2V8rm",ro={huntIcon:no},oo=()=>t.jsx("div",{className:ro.huntIcon,children:t.jsx(S,{src:Re,alt:"Hunt Icon"})}),ao=()=>{var m;const s=U(),e=k(g=>g.lang),n=k(g=>g.user),o=k(g=>g.modals.perks),r=n.perks,a=(m=n.profile)==null?void 0:m.gameProfile,{pendingPerks:c,commitChanges:l,upgradeSkill:i}=Or(r),u=async()=>{console.log("⏳ Start closing perks modal..."),await l(),s(Je(!1)),console.log("✅ Perks modal closed")},p=Number(r==null?void 0:r.experience)||0,f=Number(a==null?void 0:a.upgradePoints)||0,h=Math.min(f/20*100,100);return t.jsx(be,{children:o&&t.jsx("div",{className:_.perksModal,children:t.jsxs(ge.div,{initial:{top:"100%"},animate:{top:"30%"},exit:{top:"100%"},className:_.perks,children:[t.jsx("div",{className:_.closeBlock,onClick:u,children:t.jsx("button",{className:_.close,children:t.jsx("p",{className:_.closeText,children:e.back})})}),t.jsxs("div",{className:_.yourlvl,children:[t.jsxs("div",{className:_.lvlText,children:[t.jsx("div",{className:_.lvlIcon,children:t.jsx(st,{})}),e.perks.lvlText,": ",f]}),t.jsx("button",{className:_.lvlBtn,children:t.jsx("div",{className:_.lvlButtonIcon,children:t.jsx(so,{})})}),t.jsx("div",{className:_.lvlProgress,style:{"--points-width":`${h}%`}})]}),t.jsxs("div",{className:_.exp,children:[t.jsx($e,{icon:Re}),t.jsxs("h3",{className:_.title,children:[e.perks.experience.title," ",p,"%",t.jsx("div",{className:_.titleIcon,children:t.jsx(oo,{})})]}),t.jsx("p",{className:_.description,children:e.perks.experience.description})]}),t.jsx(Yr,{perks:c,onUpgrade:i})]})})})},co="menuScreen__-nLlH",io={menuScreen:co},Ae=()=>t.jsxs("div",{className:io.menuScreen,children:[t.jsx(ir,{}),t.jsx(Br,{}),t.jsx(Vr,{}),t.jsx(ao,{})]}),lo="item__dsAYl",uo="slideInStep__kS9PJ",po="profile__sk-AV",ho="profileAvatar__ZjG0g",mo="info__jbpi6",fo="nameContainer__YKZA1",go="name__Hj6R-",vo="headerExtra__KM2pS",xo="resources__Jc9Tc",Co="resourceIcon__KNfQs",_o="resourceCount__7u0PY",ko="tail__qAzkg",A={item:lo,slideInStep:uo,profile:po,profileAvatar:ho,info:mo,nameContainer:fo,name:go,headerExtra:vo,resources:xo,resourceIcon:Co,resourceCount:_o,tail:ko},nt=({className:s,style:e,avatarUrl:n,username:o,ducks:r=0,headerExtra:a,tail:c,usernameStyle:l,ducksStyle:i})=>t.jsxs("li",{className:Ne(A.item,s),style:e,children:[t.jsxs("div",{className:A.profile,children:[t.jsx("div",{className:A.profileAvatar,children:t.jsx(Te,{photoUrl:`${n}`,loadingType:"eager"})}),t.jsxs("div",{className:A.info,children:[t.jsxs("div",{className:A.nameContainer,children:[t.jsx("div",{className:A.name,style:l,children:o}),a&&t.jsx("span",{className:A.headerExtra,children:a})]}),t.jsxs("div",{className:A.resources,children:[t.jsx("div",{className:A.resourceIcon,children:t.jsx(xe,{})}),t.jsx("span",{className:A.resourceCount,style:i,children:r})]})]})]}),t.jsx("div",{className:A.tail,children:c})]}),rt="/Hunter-Demo-Build/icons/CompleteStatus.webp",ot="/Hunter-Demo-Build/icons/PendingStatus.webp",jo="referralSlot__ygiLx",yo="profileStatus__0PP8L",wo="pending__Z5tKd",So="completed__LxYzY",fe={referralSlot:jo,profileStatus:yo,pending:wo,completed:So},Io=({className:s,status:e,...n})=>{const o=e==="VERIFIED"?rt:ot;return t.jsx(nt,{...n,className:fe.referralSlot,tail:No(o,e)})};function No(s,e){return t.jsx("img",{src:s,alt:e,className:Ne(fe.profileStatus,{[fe.completed]:e==="VERIFIED",[fe.pending]:e==="IN-PROGRESS"})})}const bo="bottomBar__l3efR",Ho="bounceIn__QfeuA",To={bottomBar:bo,bounceIn:Ho},at=({children:s,style:e})=>t.jsx("div",{className:To.bottomBar,style:e,children:s}),Bo="/Hunter-Demo-Build/icons/Copy.webp",Lo="/Hunter-Demo-Build/icons/Friends.webp",$o="/Hunter-Demo-Build/icons/ReferralChest.webp",Ro="referralPage__ozLok",Po="referralHeader__94kBa",Ao="bounceIn__D-xXM",Uo="fixedTop__wumlo",Fo="headerContainer__ToROh",Do="inviteRewardBox__1AEaS",Mo="inviteRewardTextContainer__HWXi8",Eo="inviteRewardHeaderText__jxuw3",Vo="inviteRewardTitleText__B31qV",Oo="inviteRewardIconContainer__KMTUj",qo="inviteRewardIcon__ejwqm",Wo="inviteRewardsInventory__ulsv2",Zo="inventoryHeader__q3Uj0",zo="bottomTextContainer__MGUcU",Go="headerFriendList__orjpt",Jo="titleFriendList__o-fMp",Ko="bottomButtonsContainer__LzFEF",Xo="inviteButton__K-2h4",Yo="copyButton__H1tqu",Qo="copyButtonIcon__lTep7",ea="listHeaderContainer__NvO-B",ta="listHeaderText__z-Ld5",sa="listStatusContainer__TSRlF",na="allFriendsContainer__JNbuB",ra="verifiedFriendsContainer__4pEbD",oa="pendingFriendsContainer__udU9k",aa="allFriendsIcon__rO6BO",ca="verifiedFriendsIcon__Zhmyn",ia="pendingFriendsIcon__J4DNR",la="allFriendCount__C8jH2",da="verifiedFriendCount__Z7fvc",ua="pendingFriendCount__xogMC",pa="friendsList__9Y0Lx",C={referralPage:Ro,referralHeader:Po,bounceIn:Ao,fixedTop:Uo,headerContainer:Fo,inviteRewardBox:Do,inviteRewardTextContainer:Mo,inviteRewardHeaderText:Eo,inviteRewardTitleText:Vo,inviteRewardIconContainer:Oo,inviteRewardIcon:qo,inviteRewardsInventory:Wo,inventoryHeader:Zo,bottomTextContainer:zo,headerFriendList:Go,titleFriendList:Jo,bottomButtonsContainer:Ko,inviteButton:Xo,copyButton:Yo,copyButtonIcon:Qo,listHeaderContainer:ea,listHeaderText:ta,listStatusContainer:sa,allFriendsContainer:na,verifiedFriendsContainer:ra,pendingFriendsContainer:oa,allFriendsIcon:aa,verifiedFriendsIcon:ca,pendingFriendsIcon:ia,allFriendCount:la,verifiedFriendCount:da,pendingFriendCount:ua,friendsList:pa},ha="https://t.me/test_tg_hunter_aperbot/hunt",ma=()=>{const{isAuthenticated:s,refreshToken:e}=Q(),{status:n,totalAmount:o,verifiedAmount:r,pendingAmount:a,referrals:c}=k(T=>T.social),{getFriends:l}=Ze(!0),[i,u]=d.useState([]),[p,f]=d.useState(0),[h,m]=d.useState(0),[g,v]=d.useState(0),x=Y.GetUserProfile(),b=`${ha}?startapp=ref_${x==null?void 0:x.id}`,H=`🚀 Join in while it’s still early!
The game on TON is still in development — you can already 🛠️ follow the progress, get 📢 updates, and 🧑‍🤝‍🧑 invite friends.
The earlier you join, the better your chances to hit the 🏆 top and earn bigger 💰 bonuses after launch!`,D=()=>{const T=encodeURIComponent(`
${H}`),O=`https://t.me/share/url?url=${encodeURIComponent(b)}&text=${T}`;if(!Y.IsTelegram()){console.warn("App opened outide telegram :O");return}window.Telegram.WebApp.openTelegramLink(O)},M=()=>{const T=`${H}

 ${b}`;navigator.clipboard.writeText(`${T}`),V.success("Referral link copied")};return d.useEffect(()=>{e&&n==="loading"&&(console.log("Start fetching friends list..."),l())},[e,n,o,c]),d.useEffect(()=>{n==="succeeded"&&(u(c||[]),f(o||0),m(r||0),v(a||0))},[n,c,i]),s?t.jsxs("div",{className:C.referralPage,children:[t.jsx("div",{className:C.fixedTop,children:t.jsx(Le,{})}),t.jsx("div",{className:C.headerContainer,children:t.jsx(Be,{})}),t.jsxs("div",{className:C.inviteRewardBox,children:[t.jsxs("div",{className:C.inviteRewardTextContainer,children:[t.jsx("span",{className:C.inviteRewardHeaderText,children:"Chests"}),t.jsx("span",{className:C.inviteRewardTitleText,children:"Invite friends to receive keys"})]}),t.jsx("div",{className:C.inviteRewardIconContainer,children:t.jsx(S,{src:$o,alt:"Referral Chest",className:C.inviteRewardIcon})})]}),t.jsxs(at,{children:[t.jsxs("div",{className:C.bottomTextContainer,children:[t.jsx("span",{className:C.headerFriendList,children:"Recruits"}),t.jsx("span",{className:C.titleFriendList,children:"Invite your friends NOW and get bonuses AFTER the game launches!"})]}),t.jsxs("div",{className:C.bottomButtonsContainer,children:[t.jsx("button",{className:C.inviteButton,onClick:D,children:"Invite Newbies"}),t.jsx("button",{className:C.copyButton,onClick:M,children:t.jsx(S,{className:C.copyButtonIcon,src:Bo,alt:"Copy Icon"})})]}),t.jsxs("div",{className:C.listHeaderContainer,children:[t.jsx("span",{className:C.listHeaderText,children:"Your recruits"}),t.jsxs("div",{className:C.listStatusContainer,children:[t.jsxs("div",{className:C.allFriendsContainer,children:[t.jsx("span",{className:C.allFriendCount,children:p}),t.jsx(S,{src:Lo,alt:"All Friends",className:C.allFriendsIcon})]}),t.jsxs("div",{className:C.verifiedFriendsContainer,children:[t.jsx("span",{className:C.verifiedFriendCount,children:h}),t.jsx(S,{src:rt,alt:"Verified Friends",className:C.verifiedFriendsIcon})]}),t.jsxs("div",{className:C.pendingFriendsContainer,children:[t.jsx("span",{className:C.pendingFriendCount,children:g}),t.jsx(S,{src:ot,alt:"Pending Friends",className:C.pendingFriendsIcon})]})]})]}),t.jsx("div",{className:C.friendsList,children:i.length>0&&t.jsx("ul",{children:[...i].sort((T,P)=>(P.ducks??0)-(T.ducks??0)).slice(0,100).map((T,P)=>t.jsx(Io,{avatarUrl:T.photoUrl,username:T.username,status:T.status,ducks:T.ducks,style:{animationDelay:`${P*.2}s`}},P))})})]})]}):t.jsx(De,{to:"/",replace:!0})},fa="frame__peBkc",ga={frame:fa},va=({style:s,className:e,children:n})=>t.jsx("div",{className:`${ga.frame} ${e||""}`,style:s,children:n}),xa="memberSlot__P-WnV",Ca="placement__MUAsp",_a="rank__XyIZ-",Pe={memberSlot:xa,placement:Ca,rank:_a},ka=({placement:s,rank:e,style:n={},...o})=>t.jsx(nt,{usernameStyle:{color:"#EBE0DE"},ducksStyle:{color:"#C39696"},...o,className:Pe.memberSlot,style:{...n,borderTop:"none"},headerExtra:ja(e),tail:ya(s)});function ja(s){return t.jsxs("span",{className:Pe.rank,children:["lvl ",s]})}function ya(s){return t.jsx("span",{className:Pe.placement,children:s})}const wa="/Hunter-Demo-Build/icons/LeaderboardBackground.webp",Sa="/Hunter-Demo-Build/icons/BrokenArrow.webp",Ia="leaderboard__Lnjb-",Na="langBar__EjznT",ba="profileBar__Q-cDr",Ha="header__mwi1S",Ta="headerBackground__vChLt",Ba="clothBackground__eLT2W",La="headerText__QE7mw",$a="winnnersPlacement__9fTUu",Ra="flipIn__b2dIE",Pa="firstPlace__Xv58M",Aa="secondPlace__iO3OA",Ua="thirdPlace__aYVCa",Fa="firstPlaceIcon__X4Wlg",Da="winnerMetadata__oYb6F",Ma="winnerAvatar__piWe-",Ea="winnerName__tOIIG",Va="winnerLvl__jeK-J",Oa="winnerDucks__JPmyQ",qa="winnerDucksIcon__eBHDT",Wa="bottomContainer__YzeAg",Za="headerBar__qnwSN",za="membersList__NCIBM",Ga="popGlow__4Ooer",Ja="slideInLeft__11cN-",Ka="slideInRight__tgLhj",j={leaderboard:Ia,langBar:Na,profileBar:ba,header:Ha,headerBackground:Ta,clothBackground:Ba,headerText:La,winnnersPlacement:$a,"winner-place-1":"winner-place-1__oOEM3",flipIn:Ra,"winner-place-2":"winner-place-2__6Xp-U","winner-place-3":"winner-place-3__rMlt9",firstPlace:Pa,secondPlace:Aa,thirdPlace:Ua,firstPlaceIcon:Fa,winnerMetadata:Da,winnerAvatar:Ma,winnerName:Ea,winnerLvl:Va,winnerDucks:Oa,winnerDucksIcon:qa,bottomContainer:Wa,headerBar:Za,membersList:za,popGlow:Ga,slideInLeft:Ja,slideInRight:Ka},Xa=()=>{const{isAuthenticated:s}=Q(),{leaderboard:e}=k(u=>u.social),o=e||[{name:"Loading...",photoUrl:"",ducks:0,level:1},{name:"Loading...",photoUrl:"",ducks:0,level:1},{name:"Loading...",photoUrl:"",ducks:0,level:1},{name:"Loading...",photoUrl:"",ducks:0,level:1}],[r,a,c,...l]=o.filter(u=>(u.ducks??0)>0).sort((u,p)=>p.ducks-u.ducks),i=l.slice(0,97);return s?t.jsxs("div",{className:j.leaderboard,children:[t.jsx("div",{className:j.langBar,children:t.jsx(Le,{})}),t.jsx("div",{className:j.profileBar,children:t.jsx(Be,{})}),t.jsx("div",{className:j.header,children:t.jsx("div",{className:j.headerBackground,children:t.jsx("img",{src:wa,alt:"Red Background",className:j.clothBackground})})}),t.jsxs("div",{className:j.winnnersPlacement,children:[t.jsx("div",{className:j.secondPlace,children:a&&ke("#596A7B",2,a.name,a.level,a.ducks,`${a.photoUrl}`)}),t.jsx("div",{className:j.firstPlace,children:r&&ke("#D58F06",1,r.name,r.level,r.ducks,`${r.photoUrl}`)}),t.jsx("div",{className:j.thirdPlace,children:c&&ke("#B33720",3,c.name,c.level,c.ducks,`${c.photoUrl}`)})]}),t.jsx("div",{className:j.bottomContainer,children:t.jsxs(at,{style:{borderTopLeftRadius:75,borderTopRightRadius:75},children:[t.jsx("span",{className:j.headerBar,children:"Top 100 hunters"}),t.jsx("div",{className:j.membersList,children:o.length>3&&t.jsx("ul",{children:i.map((u,p)=>t.jsx(ka,{avatarUrl:u.photoUrl,username:u.name,placement:p+4,ducks:u.ducks,rank:u.level,style:{animationDelay:`${p*.2}s`}},u.name+p))})})]})})]}):t.jsx(De,{to:"/",replace:!0})};function ke(s,e,n,o,r,a,c){const l=e===1?"0px 4px 78px rgba(255, 242, 94, 0.65)":"none";return t.jsx(t.Fragment,{children:t.jsxs(va,{style:{"--frame-border":`4px solid ${s}`,"--frame-background-color":"linear-gradient(to left, #573030, #3b2121)","--frame-glow":l},className:j[`winner-place-${e}`],children:[t.jsx("div",{className:j.winnerAvatar,children:t.jsx(Te,{photoUrl:a,loadingType:"eager"})}),c&&t.jsx("img",{className:j.firstPlaceIcon,src:Sa,alt:"Broken arrow"}),t.jsxs("div",{className:j.winnerMetadata,children:[t.jsx("div",{className:j.winnerName,children:n}),t.jsxs("div",{className:j.winnerLvl,children:["lvl ",o]}),t.jsxs("div",{className:j.winnerDucks,children:[t.jsx("div",{className:j.winnerDucksIcon,children:t.jsx(xe,{})}),r]})]})]})})}const Ya=[{path:"/",element:t.jsx(Ae,{})},{path:"/index.html",element:t.jsx(Ae,{})},{path:"/frens",element:t.jsx(ma,{})},{path:"/leaderboard",element:t.jsx(Xa,{})}],Qa=()=>_t(Ya),ec="notifyToast__BHH0o",tc="notifyToastProgress__e6Dr6",Ue={notifyToast:ec,"Toastify__toast-body":"Toastify__toast-body__lrmYu",notifyToastProgress:tc},sc=()=>t.jsx(vt,{position:"top-right",autoClose:3e3,hideProgressBar:!1,toastClassName:Ue.notifyToast,progressClassName:Ue.notifyToastProgress,toastStyle:{fontFamily:"var(--main-font)",fontWeight:800},closeButton:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!0,limit:3,theme:"light"}),nc="/Hunter-Demo-Build/icons/ForestBackground.webp",rc="forestScreen__yHxgK",oc={forestScreen:rc},ac=()=>t.jsx(S,{src:nc,className:oc.forestScreen,alt:"Menu Background"}),cc=[{pathnames:["/leaderboard"],icon:t.jsx(ic,{}),link:"/leaderboard"},{pathnames:["/","/market"],icon:t.jsx(dc,{}),link:"/"},{pathnames:["/frens"],icon:t.jsx(lc,{}),link:"/frens"}];function ic(){return t.jsxs("svg",{width:"25",height:"22",viewBox:"0 0 25 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M12.7 16.309C13.3435 16.309 13.2148 13.7096 13.8162 13.5498C15.0766 13.2148 15.9998 12.5488 16.9682 11.6354C18.8292 9.88002 20.0171 7.21098 20.0171 4.22196V3.84809V1.69902C17.3054 1.25887 15.517 1.03125 12.7 1.03125C10.6709 1.03125 7.89995 1.25887 5.18818 1.69902V3.84809V4.22196C5.18818 7.21098 6.37609 9.88002 8.23713 11.6354C9.20553 12.5488 10.3562 13.2148 11.6166 13.5498C12.218 13.7096 12.0565 16.309 12.7 16.309Z",fill:"#E2D6D4"}),t.jsx("path",{d:"M12.7 16.309C13.3435 16.309 13.2148 13.7096 13.8162 13.5498C15.0766 13.2148 15.9998 12.5488 16.9682 11.6354M12.7 16.309C12.0565 16.309 12.218 13.7096 11.6166 13.5498C10.3562 13.2148 9.20553 12.5488 8.23713 11.6354M12.7 16.309C12.7 17.2352 12.7 18.6771 12.7 18.6771C12.7 18.6771 12.7 19.5938 12.7 20.625M5.18818 3.84809C3.98036 4.05065 2.78477 4.29677 1.60266 4.585C2.15636 8.36774 1.79965 11.6354 8.23713 11.6354M5.18818 3.84809V4.22196C5.18818 7.21098 6.37609 9.88002 8.23713 11.6354M5.18818 3.84809V1.69902C7.89995 1.25887 10.6709 1.03125 12.7 1.03125C15.517 1.03125 17.3054 1.25887 20.0171 1.69902V3.84809M20.0171 3.84809V4.22196C20.0171 7.21098 18.8292 9.88002 16.9682 11.6354M20.0171 3.84809C21.225 4.05065 22.4205 4.29677 23.6027 4.585C23.049 8.36773 23.2719 12.4132 16.9682 11.6354M12.7 20.625C14.3214 20.625 16.9682 20.9688 16.9682 20.9688M12.7 20.625C11.6166 20.625 8.69445 20.9688 8.69445 20.9688",stroke:"#E2D6D4",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function lc(){return t.jsxs("svg",{width:"23",height:"18",viewBox:"0 0 23 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M9.63794 17.1548C9.63794 17.1548 8.26294 17.1548 8.26294 15.7615C8.26294 14.3681 9.63794 10.1881 15.1379 10.1881C20.6379 10.1881 22.0129 14.3681 22.0129 15.7615C22.0129 17.1548 20.6379 17.1548 20.6379 17.1548H9.63794Z",fill:"#E5E5E5"}),t.jsx("path",{d:"M9.63794 17.1548C9.63794 17.1548 8.26294 17.1548 8.26294 15.7615C8.26294 14.3681 9.63794 10.1881 15.1379 10.1881C20.6379 10.1881 22.0129 14.3681 22.0129 15.7615C22.0129 17.1548 20.6379 17.1548 20.6379 17.1548H9.63794Z",fill:"#E2D6D4"}),t.jsx("path",{d:"M15.1379 8.79482C17.4161 8.79482 19.2629 6.92337 19.2629 4.61481C19.2629 2.30626 17.4161 0.434814 15.1379 0.434814C12.8598 0.434814 11.0129 2.30626 11.0129 4.61481C11.0129 6.92337 12.8598 8.79482 15.1379 8.79482Z",fill:"#E5E5E5"}),t.jsx("path",{d:"M15.1379 8.79482C17.4161 8.79482 19.2629 6.92337 19.2629 4.61481C19.2629 2.30626 17.4161 0.434814 15.1379 0.434814C12.8598 0.434814 11.0129 2.30626 11.0129 4.61481C11.0129 6.92337 12.8598 8.79482 15.1379 8.79482Z",fill:"#E2D6D4"}),t.jsx("path",{d:"M7.18544 17.1548C6.99184 16.759 6.88794 16.2898 6.88794 15.7615C6.88794 13.8729 7.82164 11.9306 9.54984 10.5782C8.79382 10.3332 7.91245 10.1881 6.88794 10.1881C1.38794 10.1881 0.0129395 14.3681 0.0129395 15.7615C0.0129395 17.1548 1.38794 17.1548 1.38794 17.1548H7.18544Z",fill:"#E5E5E5"}),t.jsx("path",{d:"M7.18544 17.1548C6.99184 16.759 6.88794 16.2898 6.88794 15.7615C6.88794 13.8729 7.82164 11.9306 9.54984 10.5782C8.79382 10.3332 7.91245 10.1881 6.88794 10.1881C1.38794 10.1881 0.0129395 14.3681 0.0129395 15.7615C0.0129395 17.1548 1.38794 17.1548 1.38794 17.1548H7.18544Z",fill:"#E2D6D4"}),t.jsx("path",{d:"M6.20044 8.79482C8.09892 8.79482 9.63794 7.23527 9.63794 5.31148C9.63794 3.38769 8.09892 1.82815 6.20044 1.82815C4.30196 1.82815 2.76294 3.38769 2.76294 5.31148C2.76294 7.23527 4.30196 8.79482 6.20044 8.79482Z",fill:"#E5E5E5"}),t.jsx("path",{d:"M6.20044 8.79482C8.09892 8.79482 9.63794 7.23527 9.63794 5.31148C9.63794 3.38769 8.09892 1.82815 6.20044 1.82815C4.30196 1.82815 2.76294 3.38769 2.76294 5.31148C2.76294 7.23527 4.30196 8.79482 6.20044 8.79482Z",fill:"#E2D6D4"})]})}function dc(){return t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M23.9731 23.7788C23.9731 24.0632 23.6145 23.9921 23.3994 23.9921C23.1125 23.921 22.7539 23.7788 22.467 23.6365C21.6064 23.2099 20.7458 22.7832 19.8135 22.3566C19.7417 22.3566 19.67 22.2143 19.67 22.1432C19.5983 21.6455 19.5983 21.1477 19.8135 20.721L18.5225 19.441C18.3074 19.5833 18.164 19.6544 17.9488 19.7966C17.0882 20.2944 15.6538 21.0766 14.6498 21.7877C13.7892 22.3566 13.0003 22.9966 12.2114 23.7077C12.1396 23.7788 12.1396 23.7788 12.1396 23.7788H12.0679C11.9962 23.7788 11.9962 23.7788 11.9245 23.7788C11.4225 23.3521 10.9922 22.9966 10.5618 22.641C9.27092 21.6455 7.98 20.9344 6.4022 20.0099C6.04361 19.7966 5.75674 19.6544 5.46987 19.441L4.10723 20.6499C4.32238 21.0766 4.32238 21.6455 4.25067 22.1432C4.25067 22.2143 4.17895 22.2854 4.10723 22.2854C3.24661 22.7832 2.45772 23.1388 1.5971 23.5654C1.38195 23.6365 1.16679 23.7788 0.951638 23.8499C0.736484 23.921 0.52133 23.9921 0.377894 23.9921C0.377894 23.9921 0.306176 23.9921 0.234458 23.9921C0.162741 23.9921 0.162741 23.9921 0.0910226 23.921C-0.124131 23.7077 0.0910225 23.2099 0.234458 22.9254C0.306176 22.7121 0.52133 22.3566 0.736484 21.8588C1.02336 21.2188 1.31023 20.6499 1.5971 20.081C1.5971 20.0099 1.74054 20.0099 1.74054 19.9388C2.17084 19.7966 2.67287 19.7255 3.1749 19.8677L4.32238 18.6588C3.74864 18.3033 3.24661 17.8766 2.74459 17.3788C2.45772 17.0944 2.24256 16.8811 2.02741 16.5255C1.95569 16.3833 1.88397 16.17 1.81225 15.9566C1.66882 15.6722 1.66882 15.3166 1.81225 14.9611C1.88397 14.7477 1.95569 14.5344 2.09913 14.3211C2.31428 13.9655 2.67287 13.5389 2.88802 13.1833C3.53349 12.1878 3.82036 11.05 3.96379 9.91224C3.96379 9.69891 4.10723 9.13003 4.25067 8.2767C4.32238 7.70782 4.46582 7.13894 4.53754 6.64116C4.60925 6.28561 4.75269 5.93006 4.89613 5.57451C4.89613 5.57451 4.89613 5.57451 4.82441 5.57451C4.68097 5.29007 4.53754 5.14784 4.32238 4.93451C4.17895 5.07673 4.03551 5.21896 3.89208 5.36118C3.82036 5.43229 3.74864 5.5034 3.6052 5.36118C2.31428 4.22341 1.38195 3.37009 0.736484 2.8012C0.736484 2.8012 0.736484 2.73009 0.664766 2.65898C0.664766 2.58787 0.664766 2.58787 0.664766 2.51676C0.664766 2.44565 0.593048 2.23232 0.593048 1.73455C0.593048 1.66344 0.664766 1.59233 0.736484 1.59233C1.09507 1.59233 1.52538 1.59233 1.95569 1.59233C1.95569 1.16566 2.02741 0.739001 2.02741 0.312339C2.02741 0.241228 2.02741 0.241228 2.09913 0.170118C2.17084 0.170118 2.17084 0.170118 2.24256 0.170118C3.67692 1.4501 4.60925 2.37454 5.11128 2.8012C5.183 2.87231 5.183 2.94342 5.25472 3.01453C5.25472 3.22786 5.32643 3.4412 5.32643 3.72564C5.32643 3.79675 5.32643 3.86786 5.25472 3.86786L5.61331 4.22341C6.25877 3.51231 7.04767 2.94342 7.98 2.58787C8.69718 2.30343 9.55779 2.0901 10.3467 1.94788C10.8487 1.87677 11.3507 1.80566 11.9245 1.80566C12.0679 1.80566 12.2114 1.80566 12.3548 1.80566C12.8568 1.80566 13.2871 1.87677 13.7174 1.87677C14.8649 2.01899 15.9407 2.37454 16.873 2.94342C17.4468 3.29897 17.9488 3.65453 18.3074 4.1523L18.666 3.79675C18.5943 3.72564 18.5943 3.72564 18.5943 3.65453C18.666 3.22786 18.666 3.01453 18.666 2.87231C18.666 2.8012 18.7377 2.73009 18.8094 2.65898C20.1003 1.52122 21.0327 0.59678 21.6781 0.0278969C21.7498 -0.0432134 21.8933 0.0278969 21.8933 0.170118C21.965 0.739001 21.965 1.16566 21.965 1.4501C22.5387 1.4501 22.9691 1.4501 23.1842 1.4501C23.2559 1.4501 23.3276 1.52122 23.3276 1.59233C23.3276 1.66344 23.3276 1.87677 23.2559 2.37454C23.2559 2.44565 23.2559 2.51676 23.2559 2.51676C23.2559 2.58787 23.1842 2.58787 23.1842 2.65898C22.2519 3.51231 21.3195 4.36563 20.3155 5.21896C20.2438 5.29007 20.1721 5.29007 20.0286 5.14784L19.5983 4.72118L19.0246 5.5034C19.2397 6.07228 19.3832 6.64116 19.5266 7.28116C19.5983 7.85004 19.7417 8.34781 19.8135 8.70336C19.8852 9.27225 19.9569 9.69891 20.0286 10.1256C20.1721 10.9078 20.3872 11.69 20.6741 12.4011C20.961 12.97 21.3195 13.4678 21.6781 14.0366C21.7498 14.1789 21.8216 14.3211 21.965 14.4633C22.1802 14.8189 22.3236 15.1744 22.2519 15.53C22.2519 15.8855 22.0367 16.3122 21.7498 16.5966C21.5347 16.8099 21.3195 17.0944 21.1044 17.3077C20.6024 17.7344 20.1003 18.161 19.5266 18.5877L20.6741 19.7966C20.6741 19.7966 20.7458 19.7966 20.8175 19.7966C20.961 19.7966 21.1044 19.7255 21.2478 19.7966C21.463 19.7966 21.6781 19.8677 21.8933 19.9388C21.965 19.9388 22.0367 19.9388 22.0367 20.0099C22.1084 20.0099 22.1802 20.081 22.2519 20.1521C22.8256 21.2899 23.2559 22.2143 23.6145 22.9254C23.6862 23.0677 23.758 23.2099 23.758 23.3521C23.9731 23.4943 24.0448 23.6365 23.9731 23.7788Z",fill:"#E2D6D4"})})}const uc="nav__St-V5",pc="navItem__UzPQd",hc="navItemCurrent__8ucAD",Ie={nav:uc,navItem:pc,navItemCurrent:hc},mc=()=>{const s=Me();return t.jsx("div",{className:Ie.nav,children:cc.map(e=>t.jsx(fc,{item:e,path:s.pathname},e.link))})};function fc({item:s,path:e}){return t.jsx(pt,{to:s.link,className:s.pathnames.includes(e)?Ie.navItemCurrent:Ie.navItem,children:s.icon},s.link)}const gc="app__JnT6l",vc="navigationBar__k1M1O",ct={app:gc,navigationBar:vc},xc=()=>{const e=Me().pathname==="/";return t.jsxs(t.Fragment,{children:[e&&t.jsx(ac,{}),t.jsx(Qa,{}),t.jsx(sc,{}),t.jsx("div",{className:ct.navigationBar,children:t.jsx(mc,{})})]})},Cc=()=>{const[s,e]=d.useState(!1),[n,o]=d.useState(!1);He();const{accountStatus:r}=Tt(),{isAuthenticated:a}=Q(),{isProfileReady:c}=ve(a),{isLoaded:l}=Et(a),{activeHuntsRequested:i,activeHunts:u,loadActiveHunts:p}=Oe(a),{leaderboard:f,isLeaderboardRequested:h,getLeaderboard:m}=Ze(a),v=!(r==="loading")&&a,x=v&&c&&l&&n&&s;return d.useEffect(()=>{if(!c||!v)return;!i&&!n&&p(),!h&&!f&&m(),console.log("✅ Finalizing game init...");const b=setTimeout(()=>{e(!0)},1500);return()=>clearTimeout(b)},[c,v,i,n]),d.useEffect(()=>{i&&!n&&o(!0)},[i,n]),d.useEffect(()=>{x&&i&&!n&&(console.log(`Loaded hunts after init: ${JSON.stringify(u)}`),console.log("✅ Successful init, game launch..."))},[x,i,u,n]),t.jsx("div",{className:ct.app,children:x?t.jsx(St,{isAuthenticated:a,children:t.jsx(xc,{})}):t.jsx(es,{})})},_c="development",kc={status:"loading",roadmap:{id:"development",steps:[{id:1,title:"Loading...",status:"completed"},{id:2,title:"Loading...",status:"completed"},{id:3,title:"Loading...",status:"in-progress"},{id:4,title:"Loading...",status:"in-progress"},{id:5,title:"Loading...",status:"in-progress"},{id:6,title:"Loading...",status:"in-progress"}]}},je=L("roadmap/fetchRoadmap",async()=>{try{const e=(await $.get(R.getRoadmapPath(_c))).data;return console.log(`Loaded roadmap steps: ${JSON.stringify(e)}`),e.roadmap||null}catch(s){throw console.error(`Load roadmap failed, reason: ${s}`),new Error(`${s}`)}}),jc=E({name:"roadmap",initialState:kc,reducers:{},extraReducers:s=>{s.addCase(je.pending,e=>{e.status="loading"}).addCase(je.fulfilled,(e,n)=>{e.status="succeeded",e.roadmap=n.payload.roadmap}).addCase(je.rejected,e=>{e.status="failed"})}}),yc=jc.reducer,wc=Ct({reducer:{modals:ss,user:Ut,lang:er,notification:rs,roadmap:yc,authUser:bt,social:qt,gameConfig:Mt,huntSystem:yt}}),Sc=[{type:"prod",path:"/"},{type:"dev",path:"/Hunter-Demo-Build"}],Ic=s=>{const e=Sc.find(n=>n.type===s);return(e==null?void 0:e.path)||"/"};ut(document.getElementById("root")).render(t.jsx(gt,{store:wc,children:t.jsx(ht,{basename:Ic("dev"),children:t.jsx(Cc,{})})}));
